

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>SuperH Interfaces Guide &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Korean translations" href="../translations/ko_KR/index.html" />
    <link rel="prev" title="Linux Filesystems API" href="../filesystems/index.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                4.14.0-xilinx-v2018.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../media/index.html">Linux Media Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/index.html">Linux Filesystems API</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">SuperH Interfaces Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#memory-management">Memory Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sh-4">SH-4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#store-queue-api">Store Queue API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sh-5">SH-5</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tlb-interfaces">TLB Interfaces</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#machine-specific-interfaces">Machine Specific Interfaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mach-dreamcast">mach-dreamcast</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mach-x3proto">mach-x3proto</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#busses">Busses</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#superhyway">SuperHyway</a></li>
<li class="toctree-l3"><a class="reference internal" href="#maple">Maple</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/ko_KR/index.html">Korean translations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/zh_CN/index.html">Chinese translations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/ja_JP/index.html">Japanese translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>SuperH Interfaces Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/sh/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="superh-interfaces-guide">
<h1>SuperH Interfaces Guide<a class="headerlink" href="#superh-interfaces-guide" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Paul Mundt</td>
</tr>
</tbody>
</table>
<div class="section" id="memory-management">
<h2>Memory Management<a class="headerlink" href="#memory-management" title="Permalink to this headline">¶</a></h2>
<div class="section" id="sh-4">
<h3>SH-4<a class="headerlink" href="#sh-4" title="Permalink to this headline">¶</a></h3>
<div class="section" id="store-queue-api">
<h4>Store Queue API<a class="headerlink" href="#store-queue-api" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="c.sq_flush_range">
void <code class="descname">sq_flush_range</code><span class="sig-paren">(</span>unsigned long<em>&nbsp;start</em>, unsigned int<em>&nbsp;len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.sq_flush_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Flush (prefetch) a specific SQ range</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">start</span></code></dt>
<dd>the store queue address to start flushing from</dd>
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">len</span></code></dt>
<dd>the length to flush</dd>
</dl>
<p><strong>Description</strong></p>
<p>Flushes the store queue cache from <strong>start</strong> to <strong>start</strong> + <strong>len</strong> in a
linear fashion.</p>
<dl class="function">
<dt id="c.sq_remap">
unsigned long <code class="descname">sq_remap</code><span class="sig-paren">(</span>unsigned long<em>&nbsp;phys</em>, unsigned int<em>&nbsp;size</em>, const char *<em>&nbsp;name</em>, pgprot_t<em>&nbsp;prot</em><span class="sig-paren">)</span><a class="headerlink" href="#c.sq_remap" title="Permalink to this definition">¶</a></dt>
<dd><p>Map a physical address through the Store Queues</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">phys</span></code></dt>
<dd>Physical address of mapping.</dd>
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">size</span></code></dt>
<dd>Length of mapping.</dd>
<dt><code class="docutils literal"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*</span> <span class="pre">name</span></code></dt>
<dd>User invoking mapping.</dd>
<dt><code class="docutils literal"><span class="pre">pgprot_t</span> <span class="pre">prot</span></code></dt>
<dd>Protection bits.</dd>
</dl>
<p><strong>Description</strong></p>
<p>Remaps the physical address <strong>phys</strong> through the next available store queue
address of <strong>size</strong> length. <strong>name</strong> is logged at boot time as well as through
the sysfs interface.</p>
<dl class="function">
<dt id="c.sq_unmap">
void <code class="descname">sq_unmap</code><span class="sig-paren">(</span>unsigned long<em>&nbsp;vaddr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.sq_unmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Unmap a Store Queue allocation</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">vaddr</span></code></dt>
<dd>Pre-allocated Store Queue mapping.</dd>
</dl>
<p><strong>Description</strong></p>
<p>Unmaps the store queue allocation <strong>map</strong> that was previously created by
<a class="reference internal" href="#c.sq_remap" title="sq_remap"><code class="xref c c-func docutils literal"><span class="pre">sq_remap()</span></code></a>. Also frees up the pte that was previously inserted into
the kernel page table and discards the UTLB translation.</p>
</div>
</div>
<div class="section" id="sh-5">
<h3>SH-5<a class="headerlink" href="#sh-5" title="Permalink to this headline">¶</a></h3>
<div class="section" id="tlb-interfaces">
<h4>TLB Interfaces<a class="headerlink" href="#tlb-interfaces" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="c.sh64_tlb_init">
int <code class="descname">sh64_tlb_init</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.sh64_tlb_init" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform initial setup for the DTLB and ITLB.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">void</span></code></dt>
<dd>no arguments</dd>
</dl>
<dl class="function">
<dt id="c.sh64_next_free_dtlb_entry">
unsigned long long <code class="descname">sh64_next_free_dtlb_entry</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.sh64_next_free_dtlb_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the next available DTLB entry</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">void</span></code></dt>
<dd>no arguments</dd>
</dl>
<dl class="function">
<dt id="c.sh64_get_wired_dtlb_entry">
unsigned long long <code class="descname">sh64_get_wired_dtlb_entry</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.sh64_get_wired_dtlb_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Allocate a wired (locked-in) entry in the DTLB</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">void</span></code></dt>
<dd>no arguments</dd>
</dl>
<dl class="function">
<dt id="c.sh64_put_wired_dtlb_entry">
int <code class="descname">sh64_put_wired_dtlb_entry</code><span class="sig-paren">(</span>unsigned long long<em>&nbsp;entry</em><span class="sig-paren">)</span><a class="headerlink" href="#c.sh64_put_wired_dtlb_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Free a wired (locked-in) entry in the DTLB.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">long</span> <span class="pre">entry</span></code></dt>
<dd>Address of TLB slot.</dd>
</dl>
<p><strong>Description</strong></p>
<p>Works like a stack, last one to allocate must be first one to free.</p>
<dl class="function">
<dt id="c.sh64_setup_tlb_slot">
void <code class="descname">sh64_setup_tlb_slot</code><span class="sig-paren">(</span>unsigned long long<em>&nbsp;config_addr</em>, unsigned long<em>&nbsp;eaddr</em>, unsigned long<em>&nbsp;asid</em>, unsigned long<em>&nbsp;paddr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.sh64_setup_tlb_slot" title="Permalink to this definition">¶</a></dt>
<dd><p>Load up a translation in a wired slot.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">long</span> <span class="pre">config_addr</span></code></dt>
<dd>Address of TLB slot.</dd>
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">eaddr</span></code></dt>
<dd>Virtual address.</dd>
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">asid</span></code></dt>
<dd>Address Space Identifier.</dd>
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">paddr</span></code></dt>
<dd>Physical address.</dd>
</dl>
<p><strong>Description</strong></p>
<p>Load up a virtual&lt;-&gt;physical translation for <strong>eaddr**&lt;-&gt;**paddr</strong> in the
pre-allocated TLB slot <strong>config_addr</strong> (see sh64_get_wired_dtlb_entry).</p>
<dl class="function">
<dt id="c.sh64_teardown_tlb_slot">
void <code class="descname">sh64_teardown_tlb_slot</code><span class="sig-paren">(</span>unsigned long long<em>&nbsp;config_addr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.sh64_teardown_tlb_slot" title="Permalink to this definition">¶</a></dt>
<dd><p>Teardown a translation.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">long</span> <span class="pre">config_addr</span></code></dt>
<dd>Address of TLB slot.</dd>
</dl>
<p><strong>Description</strong></p>
<p>Teardown any existing mapping in the TLB slot <strong>config_addr</strong>.</p>
<dl class="function">
<dt id="c.for_each_dtlb_entry">
<code class="descname">for_each_dtlb_entry</code><span class="sig-paren">(</span><em>tlb</em><span class="sig-paren">)</span><a class="headerlink" href="#c.for_each_dtlb_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over free (non-wired) DTLB entries</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">tlb</span></code></dt>
<dd>TLB entry</dd>
</dl>
<dl class="function">
<dt id="c.for_each_itlb_entry">
<code class="descname">for_each_itlb_entry</code><span class="sig-paren">(</span><em>tlb</em><span class="sig-paren">)</span><a class="headerlink" href="#c.for_each_itlb_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over free (non-wired) ITLB entries</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">tlb</span></code></dt>
<dd>TLB entry</dd>
</dl>
<dl class="function">
<dt id="c.__flush_tlb_slot">
void <code class="descname">__flush_tlb_slot</code><span class="sig-paren">(</span>unsigned long long<em>&nbsp;slot</em><span class="sig-paren">)</span><a class="headerlink" href="#c.__flush_tlb_slot" title="Permalink to this definition">¶</a></dt>
<dd><p>Flushes TLB slot <strong>slot</strong>.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">long</span> <span class="pre">slot</span></code></dt>
<dd>Address of TLB slot.</dd>
</dl>
</div>
</div>
</div>
<div class="section" id="machine-specific-interfaces">
<h2>Machine Specific Interfaces<a class="headerlink" href="#machine-specific-interfaces" title="Permalink to this headline">¶</a></h2>
<div class="section" id="mach-dreamcast">
<h3>mach-dreamcast<a class="headerlink" href="#mach-dreamcast" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.aica_rtc_gettimeofday">
void <code class="descname">aica_rtc_gettimeofday</code><span class="sig-paren">(</span>struct timespec *<em>&nbsp;ts</em><span class="sig-paren">)</span><a class="headerlink" href="#c.aica_rtc_gettimeofday" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the time from the AICA RTC</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">timespec</span> <span class="pre">*</span> <span class="pre">ts</span></code></dt>
<dd>pointer to resulting timespec</dd>
</dl>
<p><strong>Description</strong></p>
<p>Grabs the current RTC seconds counter and adjusts it to the Unix Epoch.</p>
<dl class="function">
<dt id="c.aica_rtc_settimeofday">
int <code class="descname">aica_rtc_settimeofday</code><span class="sig-paren">(</span>const time_t<em>&nbsp;secs</em><span class="sig-paren">)</span><a class="headerlink" href="#c.aica_rtc_settimeofday" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the AICA RTC to the current time</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">const</span> <span class="pre">time_t</span> <span class="pre">secs</span></code></dt>
<dd>contains the time_t to set</dd>
</dl>
<p><strong>Description</strong></p>
<p>Adjusts the given <strong>tv</strong> to the AICA Epoch and sets the RTC seconds counter.</p>
</div>
<div class="section" id="mach-x3proto">
<h3>mach-x3proto<a class="headerlink" href="#mach-x3proto" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.ilsel_enable">
int <code class="descname">ilsel_enable</code><span class="sig-paren">(</span>ilsel_source_t<em>&nbsp;set</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ilsel_enable" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable an ILSEL set.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">ilsel_source_t</span> <span class="pre">set</span></code></dt>
<dd>ILSEL source (see ilsel_source_t enum in include/asm-sh/ilsel.h).</dd>
</dl>
<p><strong>Description</strong></p>
<p>Enables a given non-aliased ILSEL source (&lt;= ILSEL_KEY) at the highest
available interrupt level. Callers should take care to order callsites
noting descending interrupt levels. Aliasing FPGA and external board
IRQs need to use <a class="reference internal" href="#c.ilsel_enable_fixed" title="ilsel_enable_fixed"><code class="xref c c-func docutils literal"><span class="pre">ilsel_enable_fixed()</span></code></a>.</p>
<p>The return value is an IRQ number that can later be taken down with
<a class="reference internal" href="#c.ilsel_disable" title="ilsel_disable"><code class="xref c c-func docutils literal"><span class="pre">ilsel_disable()</span></code></a>.</p>
<dl class="function">
<dt id="c.ilsel_enable_fixed">
int <code class="descname">ilsel_enable_fixed</code><span class="sig-paren">(</span>ilsel_source_t<em>&nbsp;set</em>, unsigned int<em>&nbsp;level</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ilsel_enable_fixed" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable an ILSEL set at a fixed interrupt level</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">ilsel_source_t</span> <span class="pre">set</span></code></dt>
<dd>ILSEL source (see ilsel_source_t enum in include/asm-sh/ilsel.h).</dd>
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">level</span></code></dt>
<dd>Interrupt level (1 - 15)</dd>
</dl>
<p><strong>Description</strong></p>
<p>Enables a given ILSEL source at a fixed interrupt level. Necessary
both for level reservation as well as for aliased sources that only
exist on special ILSEL#s.</p>
<p>Returns an IRQ number (as <a class="reference internal" href="#c.ilsel_enable" title="ilsel_enable"><code class="xref c c-func docutils literal"><span class="pre">ilsel_enable()</span></code></a>).</p>
<dl class="function">
<dt id="c.ilsel_disable">
void <code class="descname">ilsel_disable</code><span class="sig-paren">(</span>unsigned int<em>&nbsp;irq</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ilsel_disable" title="Permalink to this definition">¶</a></dt>
<dd><p>Disable an ILSEL set</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">irq</span></code></dt>
<dd>Bit position for ILSEL set value (retval from enable routines)</dd>
</dl>
<p><strong>Description</strong></p>
<p>Disable a previously enabled ILSEL set.</p>
</div>
</div>
<div class="section" id="busses">
<h2>Busses<a class="headerlink" href="#busses" title="Permalink to this headline">¶</a></h2>
<div class="section" id="superhyway">
<h3>SuperHyway<a class="headerlink" href="#superhyway" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.superhyway_add_device">
int <code class="descname">superhyway_add_device</code><span class="sig-paren">(</span>unsigned long<em>&nbsp;base</em>, struct superhyway_device *<em>&nbsp;sdev</em>, struct superhyway_bus *<em>&nbsp;bus</em><span class="sig-paren">)</span><a class="headerlink" href="#c.superhyway_add_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a SuperHyway module</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">base</span></code></dt>
<dd>Physical address where module is mapped.</dd>
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">superhyway_device</span> <span class="pre">*</span> <span class="pre">sdev</span></code></dt>
<dd>SuperHyway device to add, or NULL to allocate a new one.</dd>
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">superhyway_bus</span> <span class="pre">*</span> <span class="pre">bus</span></code></dt>
<dd>Bus where SuperHyway module resides.</dd>
</dl>
<p><strong>Description</strong></p>
<p>This is responsible for adding a new SuperHyway module. This sets up a new
struct superhyway_device for the module being added if <strong>sdev</strong> == NULL.</p>
<p>Devices are initially added in the order that they are scanned (from the
top-down of the memory map), and are assigned an ID based on the order that
they are added. Any manual addition of a module will thus get the ID after
the devices already discovered regardless of where it resides in memory.</p>
<p>Further work can and should be done in <code class="xref c c-func docutils literal"><span class="pre">superhyway_scan_bus()</span></code>, to be sure
that any new modules are properly discovered and subsequently registered.</p>
<dl class="function">
<dt id="c.superhyway_register_driver">
int <code class="descname">superhyway_register_driver</code><span class="sig-paren">(</span>struct superhyway_driver *<em>&nbsp;drv</em><span class="sig-paren">)</span><a class="headerlink" href="#c.superhyway_register_driver" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a new SuperHyway driver</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">superhyway_driver</span> <span class="pre">*</span> <span class="pre">drv</span></code></dt>
<dd>SuperHyway driver to register.</dd>
</dl>
<p><strong>Description</strong></p>
<p>This registers the passed in <strong>drv</strong>. Any devices matching the id table will
automatically be populated and handed off to the driver’s specified probe
routine.</p>
<dl class="function">
<dt id="c.superhyway_unregister_driver">
void <code class="descname">superhyway_unregister_driver</code><span class="sig-paren">(</span>struct superhyway_driver *<em>&nbsp;drv</em><span class="sig-paren">)</span><a class="headerlink" href="#c.superhyway_unregister_driver" title="Permalink to this definition">¶</a></dt>
<dd><p>Unregister a SuperHyway driver</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">superhyway_driver</span> <span class="pre">*</span> <span class="pre">drv</span></code></dt>
<dd>SuperHyway driver to unregister.</dd>
</dl>
<p><strong>Description</strong></p>
<p>This cleans up after <a class="reference internal" href="#c.superhyway_register_driver" title="superhyway_register_driver"><code class="xref c c-func docutils literal"><span class="pre">superhyway_register_driver()</span></code></a>, and should be invoked in
the exit path of any module drivers.</p>
</div>
<div class="section" id="maple">
<h3>Maple<a class="headerlink" href="#maple" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.maple_driver_register">
int <code class="descname">maple_driver_register</code><span class="sig-paren">(</span>struct maple_driver *<em>&nbsp;drv</em><span class="sig-paren">)</span><a class="headerlink" href="#c.maple_driver_register" title="Permalink to this definition">¶</a></dt>
<dd><p>register a maple driver</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">maple_driver</span> <span class="pre">*</span> <span class="pre">drv</span></code></dt>
<dd>maple driver to be registered.</dd>
</dl>
<p><strong>Description</strong></p>
<p>Registers the passed in <strong>drv</strong>, while updating the bus type.
Devices with matching function IDs will be automatically probed.</p>
<dl class="function">
<dt id="c.maple_driver_unregister">
void <code class="descname">maple_driver_unregister</code><span class="sig-paren">(</span>struct maple_driver *<em>&nbsp;drv</em><span class="sig-paren">)</span><a class="headerlink" href="#c.maple_driver_unregister" title="Permalink to this definition">¶</a></dt>
<dd><p>unregister a maple driver.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">maple_driver</span> <span class="pre">*</span> <span class="pre">drv</span></code></dt>
<dd>maple driver to unregister.</dd>
</dl>
<p><strong>Description</strong></p>
<p>Cleans up after <a class="reference internal" href="#c.maple_driver_register" title="maple_driver_register"><code class="xref c c-func docutils literal"><span class="pre">maple_driver_register()</span></code></a>. To be invoked in the exit
path of any module drivers.</p>
<dl class="function">
<dt id="c.maple_getcond_callback">
void <code class="descname">maple_getcond_callback</code><span class="sig-paren">(</span>struct maple_device *<em>&nbsp;dev</em>, void (*callback) (struct mapleq<em>&nbsp;*mq</em>, unsigned long<em>&nbsp;interval</em>, unsigned long<em>&nbsp;function</em><span class="sig-paren">)</span><a class="headerlink" href="#c.maple_getcond_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>setup handling MAPLE_COMMAND_GETCOND</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">maple_device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>device responding</dd>
<dt><code class="docutils literal"><span class="pre">void</span> <span class="pre">(*)</span> <span class="pre">(struct</span> <span class="pre">mapleq</span> <span class="pre">*mq)</span> <span class="pre">callback</span></code></dt>
<dd>handler callback</dd>
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">interval</span></code></dt>
<dd>interval in jiffies between callbacks</dd>
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">function</span></code></dt>
<dd>the function code for the device</dd>
</dl>
<dl class="function">
<dt id="c.maple_add_packet">
int <code class="descname">maple_add_packet</code><span class="sig-paren">(</span>struct maple_device *<em>&nbsp;mdev</em>, u32<em>&nbsp;function</em>, u32<em>&nbsp;command</em>, size_t<em>&nbsp;length</em>, void *<em>&nbsp;data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.maple_add_packet" title="Permalink to this definition">¶</a></dt>
<dd><p>add a single instruction to the maple bus queue</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">maple_device</span> <span class="pre">*</span> <span class="pre">mdev</span></code></dt>
<dd>maple device</dd>
<dt><code class="docutils literal"><span class="pre">u32</span> <span class="pre">function</span></code></dt>
<dd>function on device being queried</dd>
<dt><code class="docutils literal"><span class="pre">u32</span> <span class="pre">command</span></code></dt>
<dd>maple command to add</dd>
<dt><code class="docutils literal"><span class="pre">size_t</span> <span class="pre">length</span></code></dt>
<dd>length of command string (in 32 bit words)</dd>
<dt><code class="docutils literal"><span class="pre">void</span> <span class="pre">*</span> <span class="pre">data</span></code></dt>
<dd>remainder of command string</dd>
</dl>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../translations/ko_KR/index.html" class="btn btn-neutral float-right" title="Korean translations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../filesystems/index.html" class="btn btn-neutral" title="Linux Filesystems API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>