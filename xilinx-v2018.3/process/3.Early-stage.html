

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Early-stage planning &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4. Getting the code right" href="4.Coding.html" />
    <link rel="prev" title="2. How the development process works" href="2.Process.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                4.14.0-xilinx-v2018.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Working with the kernel development community</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="howto.html">HOWTO do Linux kernel development</a></li>
<li class="toctree-l2"><a class="reference internal" href="code-of-conflict.html">Code of Conflict</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="development-process.html">A guide to the Kernel Development Process</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="1.Intro.html">1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="2.Process.html">2. How the development process works</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">3. Early-stage planning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#specifying-the-problem">3.1. Specifying the problem</a></li>
<li class="toctree-l4"><a class="reference internal" href="#early-discussion">3.2. Early discussion</a></li>
<li class="toctree-l4"><a class="reference internal" href="#who-do-you-talk-to">3.3. Who do you talk to?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#when-to-post">3.4. When to post?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#getting-official-buy-in">3.5. Getting official buy-in</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="4.Coding.html">4. Getting the code right</a></li>
<li class="toctree-l3"><a class="reference internal" href="5.Posting.html">5. Posting patches</a></li>
<li class="toctree-l3"><a class="reference internal" href="6.Followthrough.html">6. Followthrough</a></li>
<li class="toctree-l3"><a class="reference internal" href="7.AdvancedTopics.html">7. Advanced topics</a></li>
<li class="toctree-l3"><a class="reference internal" href="8.Conclusion.html">8. For more information</a></li>
<li class="toctree-l3"><a class="reference internal" href="8.Conclusion.html#conclusion">9. Conclusion</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="submitting-patches.html">Submitting patches: the essential guide to getting your code into the kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="coding-style.html">Linux kernel coding style</a></li>
<li class="toctree-l2"><a class="reference internal" href="email-clients.html">Email clients info for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="kernel-enforcement-statement.html">Linux Kernel Enforcement Statement</a></li>
<li class="toctree-l2"><a class="reference internal" href="changes.html">Minimal requirements to compile the Kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="submitting-drivers.html">Submitting Drivers For The Linux Kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="stable-api-nonsense.html">The Linux Kernel Driver Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="management-style.html">Linux kernel management style</a></li>
<li class="toctree-l2"><a class="reference internal" href="stable-kernel-rules.html">Everything you ever wanted to know about Linux -stable releases</a></li>
<li class="toctree-l2"><a class="reference internal" href="submit-checklist.html">Linux Kernel patch submission checklist</a></li>
<li class="toctree-l2"><a class="reference internal" href="kernel-docs.html">Index of Documentation for People Interested in Writing and/or Understanding the Linux Kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="applying-patches.html">Applying Patches To The Linux Kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="adding-syscalls.html">Adding a New System Call</a></li>
<li class="toctree-l2"><a class="reference internal" href="magic-number.html">Linux magic numbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="volatile-considered-harmful.html">Why the “volatile” type class should not be used</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../media/index.html">Linux Media Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/index.html">Linux Filesystems API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sh/index.html">SuperH Interfaces Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/ko_KR/index.html">Korean translations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/zh_CN/index.html">Chinese translations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/ja_JP/index.html">Japanese translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Working with the kernel development community</a> &raquo;</li>
        
          <li><a href="development-process.html">A guide to the Kernel Development Process</a> &raquo;</li>
        
      <li>3. Early-stage planning</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/process/3.Early-stage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="early-stage-planning">
<span id="development-early-stage"></span><h1>3. Early-stage planning<a class="headerlink" href="#early-stage-planning" title="Permalink to this headline">¶</a></h1>
<p>When contemplating a Linux kernel development project, it can be tempting
to jump right in and start coding.  As with any significant project,
though, much of the groundwork for success is best laid before the first
line of code is written.  Some time spent in early planning and
communication can save far more time later on.</p>
<div class="section" id="specifying-the-problem">
<h2>3.1. Specifying the problem<a class="headerlink" href="#specifying-the-problem" title="Permalink to this headline">¶</a></h2>
<p>Like any engineering project, a successful kernel enhancement starts with a
clear description of the problem to be solved.  In some cases, this step is
easy: when a driver is needed for a specific piece of hardware, for
example.  In others, though, it is tempting to confuse the real problem
with the proposed solution, and that can lead to difficulties.</p>
<p>Consider an example: some years ago, developers working with Linux audio
sought a way to run applications without dropouts or other artifacts caused
by excessive latency in the system.  The solution they arrived at was a
kernel module intended to hook into the Linux Security Module (LSM)
framework; this module could be configured to give specific applications
access to the realtime scheduler.  This module was implemented and sent to
the linux-kernel mailing list, where it immediately ran into problems.</p>
<p>To the audio developers, this security module was sufficient to solve their
immediate problem.  To the wider kernel community, though, it was seen as a
misuse of the LSM framework (which is not intended to confer privileges
onto processes which they would not otherwise have) and a risk to system
stability.  Their preferred solutions involved realtime scheduling access
via the rlimit mechanism for the short term, and ongoing latency reduction
work in the long term.</p>
<p>The audio community, however, could not see past the particular solution
they had implemented; they were unwilling to accept alternatives.  The
resulting disagreement left those developers feeling disillusioned with the
entire kernel development process; one of them went back to an audio list
and posted this:</p>
<blockquote>
<div>There are a number of very good Linux kernel developers, but they
tend to get outshouted by a large crowd of arrogant fools. Trying
to communicate user requirements to these people is a waste of
time. They are much too “intelligent” to listen to lesser mortals.</div></blockquote>
<p>(<a class="reference external" href="http://lwn.net/Articles/131776/">http://lwn.net/Articles/131776/</a>).</p>
<p>The reality of the situation was different; the kernel developers were far
more concerned about system stability, long-term maintenance, and finding
the right solution to the problem than they were with a specific module.
The moral of the story is to focus on the problem - not a specific solution
- and to discuss it with the development community before investing in the
creation of a body of code.</p>
<p>So, when contemplating a kernel development project, one should obtain
answers to a short set of questions:</p>
<blockquote>
<div><ul class="simple">
<li>What, exactly, is the problem which needs to be solved?</li>
<li>Who are the users affected by this problem?  Which use cases should the
solution address?</li>
<li>How does the kernel fall short in addressing that problem now?</li>
</ul>
</div></blockquote>
<p>Only then does it make sense to start considering possible solutions.</p>
</div>
<div class="section" id="early-discussion">
<h2>3.2. Early discussion<a class="headerlink" href="#early-discussion" title="Permalink to this headline">¶</a></h2>
<p>When planning a kernel development project, it makes great sense to hold
discussions with the community before launching into implementation.  Early
communication can save time and trouble in a number of ways:</p>
<blockquote>
<div><ul class="simple">
<li>It may well be that the problem is addressed by the kernel in ways which
you have not understood.  The Linux kernel is large and has a number of
features and capabilities which are not immediately obvious.  Not all
kernel capabilities are documented as well as one might like, and it is
easy to miss things.  Your author has seen the posting of a complete
driver which duplicated an existing driver that the new author had been
unaware of.  Code which reinvents existing wheels is not only wasteful;
it will also not be accepted into the mainline kernel.</li>
<li>There may be elements of the proposed solution which will not be
acceptable for mainline merging.  It is better to find out about
problems like this before writing the code.</li>
<li>It’s entirely possible that other developers have thought about the
problem; they may have ideas for a better solution, and may be willing
to help in the creation of that solution.</li>
</ul>
</div></blockquote>
<p>Years of experience with the kernel development community have taught a
clear lesson: kernel code which is designed and developed behind closed
doors invariably has problems which are only revealed when the code is
released into the community.  Sometimes these problems are severe,
requiring months or years of effort before the code can be brought up to
the kernel community’s standards.  Some examples include:</p>
<blockquote>
<div><ul class="simple">
<li>The Devicescape network stack was designed and implemented for
single-processor systems.  It could not be merged into the mainline
until it was made suitable for multiprocessor systems.  Retrofitting
locking and such into code is a difficult task; as a result, the merging
of this code (now called mac80211) was delayed for over a year.</li>
<li>The Reiser4 filesystem included a number of capabilities which, in the
core kernel developers’ opinion, should have been implemented in the
virtual filesystem layer instead.  It also included features which could
not easily be implemented without exposing the system to user-caused
deadlocks.  The late revelation of these problems - and refusal to
address some of them - has caused Reiser4 to stay out of the mainline
kernel.</li>
<li>The AppArmor security module made use of internal virtual filesystem
data structures in ways which were considered to be unsafe and
unreliable.  This concern (among others) kept AppArmor out of the
mainline for years.</li>
</ul>
</div></blockquote>
<p>In each of these cases, a great deal of pain and extra work could have been
avoided with some early discussion with the kernel developers.</p>
</div>
<div class="section" id="who-do-you-talk-to">
<h2>3.3. Who do you talk to?<a class="headerlink" href="#who-do-you-talk-to" title="Permalink to this headline">¶</a></h2>
<p>When developers decide to take their plans public, the next question will
be: where do we start?  The answer is to find the right mailing list(s) and
the right maintainer.  For mailing lists, the best approach is to look in
the MAINTAINERS file for a relevant place to post.  If there is a suitable
subsystem list, posting there is often preferable to posting on
linux-kernel; you are more likely to reach developers with expertise in the
relevant subsystem and the environment may be more supportive.</p>
<p>Finding maintainers can be a bit harder.  Again, the MAINTAINERS file is
the place to start.  That file tends to not always be up to date, though,
and not all subsystems are represented there.  The person listed in the
MAINTAINERS file may, in fact, not be the person who is actually acting in
that role currently.  So, when there is doubt about who to contact, a
useful trick is to use git (and “git log” in particular) to see who is
currently active within the subsystem of interest.  Look at who is writing
patches, and who, if anybody, is attaching Signed-off-by lines to those
patches.  Those are the people who will be best placed to help with a new
development project.</p>
<p>The task of finding the right maintainer is sometimes challenging enough
that the kernel developers have added a script to ease the process:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>.../scripts/get_maintainer.pl
</pre></div>
</div>
<p>This script will return the current maintainer(s) for a given file or
directory when given the “-f” option.  If passed a patch on the
command line, it will list the maintainers who should probably receive
copies of the patch.  There are a number of options regulating how hard
get_maintainer.pl will search for maintainers; please be careful about
using the more aggressive options as you may end up including developers
who have no real interest in the code you are modifying.</p>
<p>If all else fails, talking to Andrew Morton can be an effective way to
track down a maintainer for a specific piece of code.</p>
</div>
<div class="section" id="when-to-post">
<h2>3.4. When to post?<a class="headerlink" href="#when-to-post" title="Permalink to this headline">¶</a></h2>
<p>If possible, posting your plans during the early stages can only be
helpful.  Describe the problem being solved and any plans that have been
made on how the implementation will be done.  Any information you can
provide can help the development community provide useful input on the
project.</p>
<p>One discouraging thing which can happen at this stage is not a hostile
reaction, but, instead, little or no reaction at all.  The sad truth of the
matter is (1) kernel developers tend to be busy, (2) there is no shortage
of people with grand plans and little code (or even prospect of code) to
back them up, and (3) nobody is obligated to review or comment on ideas
posted by others.  Beyond that, high-level designs often hide problems
which are only reviewed when somebody actually tries to implement those
designs; for that reason, kernel developers would rather see the code.</p>
<p>If a request-for-comments posting yields little in the way of comments, do
not assume that it means there is no interest in the project.
Unfortunately, you also cannot assume that there are no problems with your
idea.  The best thing to do in this situation is to proceed, keeping the
community informed as you go.</p>
</div>
<div class="section" id="getting-official-buy-in">
<h2>3.5. Getting official buy-in<a class="headerlink" href="#getting-official-buy-in" title="Permalink to this headline">¶</a></h2>
<p>If your work is being done in a corporate environment - as most Linux
kernel work is - you must, obviously, have permission from suitably
empowered managers before you can post your company’s plans or code to a
public mailing list.  The posting of code which has not been cleared for
release under a GPL-compatible license can be especially problematic; the
sooner that a company’s management and legal staff can agree on the posting
of a kernel development project, the better off everybody involved will be.</p>
<p>Some readers may be thinking at this point that their kernel work is
intended to support a product which does not yet have an officially
acknowledged existence.  Revealing their employer’s plans on a public
mailing list may not be a viable option.  In cases like this, it is worth
considering whether the secrecy is really necessary; there is often no real
need to keep development plans behind closed doors.</p>
<p>That said, there are also cases where a company legitimately cannot
disclose its plans early in the development process.  Companies with
experienced kernel developers may choose to proceed in an open-loop manner
on the assumption that they will be able to avoid serious integration
problems later.  For companies without that sort of in-house expertise, the
best option is often to hire an outside developer to review the plans under
a non-disclosure agreement.  The Linux Foundation operates an NDA program
designed to help with this sort of situation; more information can be found
at:</p>
<blockquote>
<div><a class="reference external" href="http://www.linuxfoundation.org/en/NDA_program">http://www.linuxfoundation.org/en/NDA_program</a></div></blockquote>
<p>This kind of review is often enough to avoid serious problems later on
without requiring public disclosure of the project.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="4.Coding.html" class="btn btn-neutral float-right" title="4. Getting the code right" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="2.Process.html" class="btn btn-neutral" title="2. How the development process works" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>