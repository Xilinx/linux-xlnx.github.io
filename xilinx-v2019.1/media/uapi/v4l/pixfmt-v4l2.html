

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.1. Single-planar format structure &mdash; The Linux Kernel  documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../_static/theme_overrides.css" type="text/css" />
  

  
    <link rel="top" title="The Linux Kernel  documentation" href="../../../index.html"/>
        <link rel="up" title="2. Image Formats" href="pixfmt.html"/>
        <link rel="next" title="2.2. Multi-planar format structures" href="pixfmt-v4l2-mplane.html"/>
        <link rel="prev" title="2. Image Formats" href="pixfmt.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                4.19.0-xilinx-v2019.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../process/license-rules.html">Linux kernel licensing rules</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/index.html">The Linux kernel user&#8217;s and administrator&#8217;s guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../driver-api/index.html">The Linux driver implementer&#8217;s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Linux Media Subsystem Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../media_uapi.html">Linux Media Infrastructure userspace API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../intro.html">Introduction</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="v4l2.html">Part I - Video for Linux API</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="common.html">1. Common API Elements</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="pixfmt.html">2. Image Formats</a></li>
<li class="toctree-l4"><a class="reference internal" href="io.html">3. Input/Output</a></li>
<li class="toctree-l4"><a class="reference internal" href="devices.html">4. Interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="libv4l.html">5. Libv4l Userspace Library</a></li>
<li class="toctree-l4"><a class="reference internal" href="compat.html">6. Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="user-func.html">7. Function Reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="common-defs.html">8. Common definitions for V4L2 and V4L2 subdev interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="videodev.html">9. Video For Linux Two Header File</a></li>
<li class="toctree-l4"><a class="reference internal" href="capture-example.html">10. Video Capture Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2grab-example.html">11. Video Grabber example using libv4l</a></li>
<li class="toctree-l4"><a class="reference internal" href="biblio.html">12. References</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2.html#revision-and-copyright">Revision and Copyright</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2.html#revision-history">Revision History</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dvb/dvbapi.html">Part II - Digital TV API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rc/remote_controllers.html">Part III - Remote Controller API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mediactl/media-controller.html">Part IV - Media Controller API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cec/cec-api.html">Part V - Consumer Electronics Control API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gen-errors.html">Generic Error Codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fdl-appendix.html">GNU Free Documentation License</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../media_kapi.html">Media subsystem kernel internal API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dvb-drivers/index.html">Linux Digital TV driver-specific documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v4l-drivers/index.html">Video4Linux (V4L)  driver-specific documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cec-drivers/index.html">CEC driver-specific documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu/index.html">Linux GPU Driver Developer&#8217;s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../filesystems/index.html">Linux Filesystems API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../sh/index.html">SuperH Interfaces Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../filesystems/ext4/index.html">ext4 Filesystem</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">The Linux Kernel</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Linux Media Subsystem Documentation</a> &raquo;</li>
      
          <li><a href="../../media_uapi.html">Linux Media Infrastructure userspace API</a> &raquo;</li>
      
          <li><a href="v4l2.html">Part I - Video for Linux API</a> &raquo;</li>
      
          <li><a href="pixfmt.html">2. Image Formats</a> &raquo;</li>
      
    <li>2.1. Single-planar format structure</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/media/uapi/v4l/pixfmt-v4l2.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="single-planar-format-structure">
<h1>2.1. Single-planar format structure<a class="headerlink" href="#single-planar-format-structure" title="Permalink to this headline">¶</a></h1>
<dl class="type">
<dt id="c.v4l2_pix_format">
<code class="descname">v4l2_pix_format</code><a class="headerlink" href="#c.v4l2_pix_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<table border="1" class="longtable docutils" id="id1">
<caption><span class="caption-text">struct v4l2_pix_format</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>__u32</td>
<td><code class="docutils literal"><span class="pre">width</span></code></td>
<td>Image width in pixels.</td>
</tr>
<tr class="row-even"><td>__u32</td>
<td><code class="docutils literal"><span class="pre">height</span></code></td>
<td>Image height in pixels. If <code class="docutils literal"><span class="pre">field</span></code> is one of <code class="docutils literal"><span class="pre">V4L2_FIELD_TOP</span></code>,
<code class="docutils literal"><span class="pre">V4L2_FIELD_BOTTOM</span></code> or <code class="docutils literal"><span class="pre">V4L2_FIELD_ALTERNATE</span></code> then height
refers to the number of lines in the field, otherwise it refers to
the number of lines in the frame (which is twice the field height
for interlaced formats).</td>
</tr>
<tr class="row-odd"><td colspan="3"> Applications set these fields to request an image
size, drivers return the closest possible values. In case of
planar formats the <code class="docutils literal"><span class="pre">width</span></code> and <code class="docutils literal"><span class="pre">height</span></code> applies to the largest
plane. To avoid ambiguities drivers must return values rounded up
to a multiple of the scale factor of any smaller planes. For
example when the image format is YUV 4:2:0, <code class="docutils literal"><span class="pre">width</span></code> and
<code class="docutils literal"><span class="pre">height</span></code> must be multiples of two.</td>
</tr>
<tr class="row-even"><td>__u32</td>
<td><code class="docutils literal"><span class="pre">pixelformat</span></code></td>
<td>The pixel format or type of compression, set by the application.
This is a little endian
<a class="reference internal" href="vidioc-enum-fmt.html#v4l2-fourcc"><span>four character code</span></a>. V4L2 defines standard
RGB formats in <a class="reference internal" href="pixfmt-packed-rgb.html#rgb-formats"><span>Packed RGB Image Formats</span></a>, YUV formats in
<a class="reference internal" href="yuv-formats.html#yuv-formats"><span>YUV Formats</span></a>, and reserved codes in
<a class="reference internal" href="pixfmt-reserved.html#reserved-formats"><span>Reserved Image Formats</span></a></td>
</tr>
<tr class="row-odd"><td>__u32</td>
<td><code class="docutils literal"><span class="pre">field</span></code></td>
<td>Field order, from enum <a class="reference internal" href="field-order.html#c.v4l2_field" title="v4l2_field"><code class="xref c c-type docutils literal"><span class="pre">v4l2_field</span></code></a>.
Video images are typically interlaced. Applications can request to
capture or output only the top or bottom field, or both fields
interlaced or sequentially stored in one buffer or alternating in
separate buffers. Drivers return the actual field order selected.
For more details on fields see <a class="reference internal" href="field-order.html#field-order"><span>Field Order</span></a>.</td>
</tr>
<tr class="row-even"><td>__u32</td>
<td><code class="docutils literal"><span class="pre">bytesperline</span></code></td>
<td>Distance in bytes between the leftmost pixels in two adjacent
lines.</td>
</tr>
<tr class="row-odd"><td colspan="3"><p class="first"></p>
<p>Both applications and drivers can set this field to request
padding bytes at the end of each line. Drivers however may ignore
the value requested by the application, returning <code class="docutils literal"><span class="pre">width</span></code> times
bytes per pixel or a larger value required by the hardware. That
implies applications can just set this field to zero to get a
reasonable default.</p>
<p>Video hardware may access padding bytes, therefore they must
reside in accessible memory. Consider cases where padding bytes
after the last line of an image cross a system page boundary.
Input devices may write padding bytes, the value is undefined.
Output devices ignore the contents of padding bytes.</p>
<p>When the image format is planar the <code class="docutils literal"><span class="pre">bytesperline</span></code> value applies
to the first plane and is divided by the same factor as the
<code class="docutils literal"><span class="pre">width</span></code> field for the other planes. For example the Cb and Cr
planes of a YUV 4:2:0 image have half as many padding bytes
following each line as the Y plane. To avoid ambiguities drivers
must return a <code class="docutils literal"><span class="pre">bytesperline</span></code> value rounded up to a multiple of
the scale factor.</p>
<p class="last">For compressed formats the <code class="docutils literal"><span class="pre">bytesperline</span></code> value makes no sense.
Applications and drivers must set this to 0 in that case.</p>
</td>
</tr>
<tr class="row-even"><td>__u32</td>
<td><code class="docutils literal"><span class="pre">sizeimage</span></code></td>
<td>Size in bytes of the buffer to hold a complete image, set by the
driver. Usually this is <code class="docutils literal"><span class="pre">bytesperline</span></code> times <code class="docutils literal"><span class="pre">height</span></code>. When
the image consists of variable length compressed data this is the
maximum number of bytes required to hold an image.</td>
</tr>
<tr class="row-odd"><td>__u32</td>
<td><code class="docutils literal"><span class="pre">colorspace</span></code></td>
<td>Image colorspace, from enum <a class="reference internal" href="colorspaces-defs.html#c.v4l2_colorspace" title="v4l2_colorspace"><code class="xref c c-type docutils literal"><span class="pre">v4l2_colorspace</span></code></a>.
This information supplements the <code class="docutils literal"><span class="pre">pixelformat</span></code> and must be set
by the driver for capture streams and by the application for
output streams, see <a class="reference internal" href="colorspaces.html#colorspaces"><span>Colorspaces</span></a>.</td>
</tr>
<tr class="row-even"><td>__u32</td>
<td><code class="docutils literal"><span class="pre">priv</span></code></td>
<td><p class="first">This field indicates whether the remaining fields of the
struct <a class="reference internal" href="#c.v4l2_pix_format" title="v4l2_pix_format"><code class="xref c c-type docutils literal"><span class="pre">v4l2_pix_format</span></code></a>, also called the
extended fields, are valid. When set to
<code class="docutils literal"><span class="pre">V4L2_PIX_FMT_PRIV_MAGIC</span></code>, it indicates that the extended fields
have been correctly initialized. When set to any other value it
indicates that the extended fields contain undefined values.</p>
<p>Applications that wish to use the pixel format extended fields
must first ensure that the feature is supported by querying the
device for the <a class="reference internal" href="querycap.html#querycap"><span>V4L2_CAP_EXT_PIX_FORMAT</span></a>
capability. If the capability isn&#8217;t set the pixel format extended
fields are not supported and using the extended fields will lead
to undefined results.</p>
<p>To use the extended fields, applications must set the <code class="docutils literal"><span class="pre">priv</span></code>
field to <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_PRIV_MAGIC</span></code>, initialize all the extended
fields and zero the unused bytes of the
struct <a class="reference internal" href="vidioc-g-fmt.html#c.v4l2_format" title="v4l2_format"><code class="xref c c-type docutils literal"><span class="pre">v4l2_format</span></code></a> <code class="docutils literal"><span class="pre">raw_data</span></code> field.</p>
<p class="last">When the <code class="docutils literal"><span class="pre">priv</span></code> field isn&#8217;t set to <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_PRIV_MAGIC</span></code>
drivers must act as if all the extended fields were set to zero.
On return drivers must set the <code class="docutils literal"><span class="pre">priv</span></code> field to
<code class="docutils literal"><span class="pre">V4L2_PIX_FMT_PRIV_MAGIC</span></code> and all the extended fields to
applicable values.</p>
</td>
</tr>
<tr class="row-odd"><td>__u32</td>
<td><code class="docutils literal"><span class="pre">flags</span></code></td>
<td>Flags set by the application or driver, see <a class="reference internal" href="pixfmt-reserved.html#format-flags"><span>Format Flags</span></a>.</td>
</tr>
<tr class="row-even"><td>union {</td>
<td>(anonymous)</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>__u32</td>
<td><code class="docutils literal"><span class="pre">ycbcr_enc</span></code></td>
<td>Y&#8217;CbCr encoding, from enum <a class="reference internal" href="colorspaces-defs.html#c.v4l2_ycbcr_encoding" title="v4l2_ycbcr_encoding"><code class="xref c c-type docutils literal"><span class="pre">v4l2_ycbcr_encoding</span></code></a>.
This information supplements the <code class="docutils literal"><span class="pre">colorspace</span></code> and must be set by
the driver for capture streams and by the application for output
streams, see <a class="reference internal" href="colorspaces.html#colorspaces"><span>Colorspaces</span></a>.</td>
</tr>
<tr class="row-even"><td>__u32</td>
<td><code class="docutils literal"><span class="pre">hsv_enc</span></code></td>
<td>HSV encoding, from enum <a class="reference internal" href="colorspaces-defs.html#c.v4l2_hsv_encoding" title="v4l2_hsv_encoding"><code class="xref c c-type docutils literal"><span class="pre">v4l2_hsv_encoding</span></code></a>.
This information supplements the <code class="docutils literal"><span class="pre">colorspace</span></code> and must be set by
the driver for capture streams and by the application for output
streams, see <a class="reference internal" href="colorspaces.html#colorspaces"><span>Colorspaces</span></a>.</td>
</tr>
<tr class="row-odd"><td>}</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>__u32</td>
<td><code class="docutils literal"><span class="pre">quantization</span></code></td>
<td>Quantization range, from enum <a class="reference internal" href="colorspaces-defs.html#c.v4l2_quantization" title="v4l2_quantization"><code class="xref c c-type docutils literal"><span class="pre">v4l2_quantization</span></code></a>.
This information supplements the <code class="docutils literal"><span class="pre">colorspace</span></code> and must be set by
the driver for capture streams and by the application for output
streams, see <a class="reference internal" href="colorspaces.html#colorspaces"><span>Colorspaces</span></a>.</td>
</tr>
<tr class="row-odd"><td>__u32</td>
<td><code class="docutils literal"><span class="pre">xfer_func</span></code></td>
<td>Transfer function, from enum <a class="reference internal" href="colorspaces-defs.html#c.v4l2_xfer_func" title="v4l2_xfer_func"><code class="xref c c-type docutils literal"><span class="pre">v4l2_xfer_func</span></code></a>.
This information supplements the <code class="docutils literal"><span class="pre">colorspace</span></code> and must be set by
the driver for capture streams and by the application for output
streams, see <a class="reference internal" href="colorspaces.html#colorspaces"><span>Colorspaces</span></a>.</td>
</tr>
</tbody>
</table>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pixfmt-v4l2-mplane.html" class="btn btn-neutral float-right" title="2.2. Multi-planar format structures" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="pixfmt.html" class="btn btn-neutral" title="2. Image Formats" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>