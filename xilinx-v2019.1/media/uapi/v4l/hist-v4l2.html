

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>6.2. Changes of the V4L2 API &mdash; The Linux Kernel  documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../_static/theme_overrides.css" type="text/css" />
  

  
    <link rel="top" title="The Linux Kernel  documentation" href="../../../index.html"/>
        <link rel="up" title="6. Changes" href="compat.html"/>
        <link rel="next" title="7. Function Reference" href="user-func.html"/>
        <link rel="prev" title="6.1. Differences between V4L and V4L2" href="diff-v4l.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                4.19.0-xilinx-v2019.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../process/license-rules.html">Linux kernel licensing rules</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/index.html">The Linux kernel user&#8217;s and administrator&#8217;s guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../driver-api/index.html">The Linux driver implementer&#8217;s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Linux Media Subsystem Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../media_uapi.html">Linux Media Infrastructure userspace API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../intro.html">Introduction</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="v4l2.html">Part I - Video for Linux API</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="common.html">1. Common API Elements</a></li>
<li class="toctree-l4"><a class="reference internal" href="pixfmt.html">2. Image Formats</a></li>
<li class="toctree-l4"><a class="reference internal" href="io.html">3. Input/Output</a></li>
<li class="toctree-l4"><a class="reference internal" href="devices.html">4. Interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="libv4l.html">5. Libv4l Userspace Library</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="compat.html">6. Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="user-func.html">7. Function Reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="common-defs.html">8. Common definitions for V4L2 and V4L2 subdev interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="videodev.html">9. Video For Linux Two Header File</a></li>
<li class="toctree-l4"><a class="reference internal" href="capture-example.html">10. Video Capture Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2grab-example.html">11. Video Grabber example using libv4l</a></li>
<li class="toctree-l4"><a class="reference internal" href="biblio.html">12. References</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2.html#revision-and-copyright">Revision and Copyright</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2.html#revision-history">Revision History</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dvb/dvbapi.html">Part II - Digital TV API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rc/remote_controllers.html">Part III - Remote Controller API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mediactl/media-controller.html">Part IV - Media Controller API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cec/cec-api.html">Part V - Consumer Electronics Control API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gen-errors.html">Generic Error Codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fdl-appendix.html">GNU Free Documentation License</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../media_kapi.html">Media subsystem kernel internal API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dvb-drivers/index.html">Linux Digital TV driver-specific documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v4l-drivers/index.html">Video4Linux (V4L)  driver-specific documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cec-drivers/index.html">CEC driver-specific documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu/index.html">Linux GPU Driver Developer&#8217;s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../filesystems/index.html">Linux Filesystems API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../sh/index.html">SuperH Interfaces Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../filesystems/ext4/index.html">ext4 Filesystem</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">The Linux Kernel</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Linux Media Subsystem Documentation</a> &raquo;</li>
      
          <li><a href="../../media_uapi.html">Linux Media Infrastructure userspace API</a> &raquo;</li>
      
          <li><a href="v4l2.html">Part I - Video for Linux API</a> &raquo;</li>
      
          <li><a href="compat.html">6. Changes</a> &raquo;</li>
      
    <li>6.2. Changes of the V4L2 API</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/media/uapi/v4l/hist-v4l2.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="changes-of-the-v4l2-api">
<span id="hist-v4l2"></span><h1>6.2. Changes of the V4L2 API<a class="headerlink" href="#changes-of-the-v4l2-api" title="Permalink to this headline">¶</a></h1>
<p>Soon after the V4L API was added to the kernel it was criticised as too
inflexible. In August 1998 Bill Dirks proposed a number of improvements
and began to work on documentation, example drivers and applications.
With the help of other volunteers this eventually became the V4L2 API,
not just an extension but a replacement for the V4L API. However it took
another four years and two stable kernel releases until the new API was
finally accepted for inclusion into the kernel in its present form.</p>
<div class="section" id="early-versions">
<h2>6.2.1. Early Versions<a class="headerlink" href="#early-versions" title="Permalink to this headline">¶</a></h2>
<p>1998-08-20: First version.</p>
<p>1998-08-27: The <a class="reference internal" href="func-select.html#func-select"><span>select()</span></a> function was introduced.</p>
<p>1998-09-10: New video standard interface.</p>
<p>1998-09-18: The <code class="docutils literal"><span class="pre">VIDIOC_NONCAP</span></code> ioctl was replaced by the otherwise
meaningless <code class="docutils literal"><span class="pre">O_TRUNC</span></code> <a class="reference internal" href="func-open.html#func-open"><span>open()</span></a> flag, and the
aliases <code class="docutils literal"><span class="pre">O_NONCAP</span></code> and <code class="docutils literal"><span class="pre">O_NOIO</span></code> were defined. Applications can set
this flag if they intend to access controls only, as opposed to capture
applications which need exclusive access. The <code class="docutils literal"><span class="pre">VIDEO_STD_XXX</span></code>
identifiers are now ordinals instead of flags, and the
<code class="docutils literal"><span class="pre">video_std_construct()</span></code> helper function takes id and
transmission arguments.</p>
<p>1998-09-28: Revamped video standard. Made video controls individually
enumerable.</p>
<p>1998-10-02: The <code class="docutils literal"><span class="pre">id</span></code> field was removed from struct
struct <code class="docutils literal"><span class="pre">video_standard</span></code> and the color subcarrier fields were
renamed. The <a class="reference internal" href="vidioc-querystd.html#vidioc-querystd"><span>ioctl VIDIOC_QUERYSTD, VIDIOC_SUBDEV_QUERYSTD</span></a> ioctl was
renamed to <a class="reference internal" href="vidioc-enumstd.html#vidioc-enumstd"><span>ioctl VIDIOC_ENUMSTD, VIDIOC_SUBDEV_ENUMSTD</span></a>,
<a class="reference internal" href="vidioc-g-input.html#vidioc-g-input"><span>VIDIOC_G_INPUT</span></a> to
<a class="reference internal" href="vidioc-enuminput.html#vidioc-enuminput"><span>ioctl VIDIOC_ENUMINPUT</span></a>. A first draft of the
Codec API was released.</p>
<p>1998-11-08: Many minor changes. Most symbols have been renamed. Some
material changes to struct <a class="reference internal" href="vidioc-querycap.html#c.v4l2_capability" title="v4l2_capability"><code class="xref c c-type docutils literal"><span class="pre">v4l2_capability</span></code></a>.</p>
<p>1998-11-12: The read/write directon of some ioctls was misdefined.</p>
<p>1998-11-14: <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_RGB24</span></code> changed to <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_BGR24</span></code>,
and <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_RGB32</span></code> changed to <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_BGR32</span></code>. Audio
controls are now accessible with the
<a class="reference internal" href="vidioc-g-ctrl.html#vidioc-g-ctrl"><span>VIDIOC_G_CTRL</span></a> and
<a class="reference internal" href="vidioc-g-ctrl.html#vidioc-g-ctrl"><span>VIDIOC_S_CTRL</span></a> ioctls under names starting
with <code class="docutils literal"><span class="pre">V4L2_CID_AUDIO</span></code>. The <code class="docutils literal"><span class="pre">V4L2_MAJOR</span></code> define was removed from
<code class="docutils literal"><span class="pre">videodev.h</span></code> since it was only used once in the <code class="docutils literal"><span class="pre">videodev</span></code> kernel
module. The <code class="docutils literal"><span class="pre">YUV422</span></code> and <code class="docutils literal"><span class="pre">YUV411</span></code> planar image formats were added.</p>
<p>1998-11-28: A few ioctl symbols changed. Interfaces for codecs and video
output devices were added.</p>
<p>1999-01-14: A raw VBI capture interface was added.</p>
<p>1999-01-19: The <code class="docutils literal"><span class="pre">VIDIOC_NEXTBUF</span></code> ioctl was removed.</p>
</div>
<div class="section" id="v4l2-version-0-16-1999-01-31">
<h2>6.2.2. V4L2 Version 0.16 1999-01-31<a class="headerlink" href="#v4l2-version-0-16-1999-01-31" title="Permalink to this headline">¶</a></h2>
<p>1999-01-27: There is now one QBUF ioctl, VIDIOC_QWBUF and VIDIOC_QRBUF
are gone. VIDIOC_QBUF takes a v4l2_buffer as a parameter. Added
digital zoom (cropping) controls.</p>
</div>
<div class="section" id="v4l2-version-0-18-1999-03-16">
<h2>6.2.3. V4L2 Version 0.18 1999-03-16<a class="headerlink" href="#v4l2-version-0-18-1999-03-16" title="Permalink to this headline">¶</a></h2>
<p>Added a v4l to V4L2 ioctl compatibility layer to videodev.c. Driver
writers, this changes how you implement your ioctl handler. See the
Driver Writer&#8217;s Guide. Added some more control id codes.</p>
</div>
<div class="section" id="v4l2-version-0-19-1999-06-05">
<h2>6.2.4. V4L2 Version 0.19 1999-06-05<a class="headerlink" href="#v4l2-version-0-19-1999-06-05" title="Permalink to this headline">¶</a></h2>
<p>1999-03-18: Fill in the category and catname fields of v4l2_queryctrl
objects before passing them to the driver. Required a minor change to
the VIDIOC_QUERYCTRL handlers in the sample drivers.</p>
<p>1999-03-31: Better compatibility for v4l memory capture ioctls. Requires
changes to drivers to fully support new compatibility features, see
Driver Writer&#8217;s Guide and v4l2cap.c. Added new control IDs:
V4L2_CID_HFLIP, _VFLIP. Changed V4L2_PIX_FMT_YUV422P to _YUV422P,
and _YUV411P to _YUV411P.</p>
<p>1999-04-04: Added a few more control IDs.</p>
<p>1999-04-07: Added the button control type.</p>
<p>1999-05-02: Fixed a typo in videodev.h, and added the
V4L2_CTRL_FLAG_GRAYED (later V4L2_CTRL_FLAG_GRABBED) flag.</p>
<p>1999-05-20: Definition of VIDIOC_G_CTRL was wrong causing a
malfunction of this ioctl.</p>
<p>1999-06-05: Changed the value of V4L2_CID_WHITENESS.</p>
</div>
<div class="section" id="v4l2-version-0-20-1999-09-10">
<h2>6.2.5. V4L2 Version 0.20 (1999-09-10)<a class="headerlink" href="#v4l2-version-0-20-1999-09-10" title="Permalink to this headline">¶</a></h2>
<p>Version 0.20 introduced a number of changes which were <em>not backward
compatible</em> with 0.19 and earlier versions. Purpose of these changes was
to simplify the API, while making it more extensible and following
common Linux driver API conventions.</p>
<ol class="arabic">
<li><p class="first">Some typos in <code class="docutils literal"><span class="pre">V4L2_FMT_FLAG</span></code> symbols were fixed. struct
<a class="reference internal" href="dev-overlay.html#c.v4l2_clip" title="v4l2_clip"><code class="xref c c-type docutils literal"><span class="pre">v4l2_clip</span></code></a> was changed for compatibility with
v4l. (1999-08-30)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">V4L2_TUNER_SUB_LANG1</span></code> was added. (1999-09-05)</p>
</li>
<li><p class="first">All ioctl() commands that used an integer argument now take a pointer
to an integer. Where it makes sense, ioctls will return the actual
new value in the integer pointed to by the argument, a common
convention in the V4L2 API. The affected ioctls are: VIDIOC_PREVIEW,
VIDIOC_STREAMON, VIDIOC_STREAMOFF, VIDIOC_S_FREQ,
VIDIOC_S_INPUT, VIDIOC_S_OUTPUT, VIDIOC_S_EFFECT. For example</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">err</span> <span class="o">=</span> <span class="n">ioctl</span> <span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">VIDIOC_XXX</span><span class="p">,</span> <span class="n">V4L2_XXX</span><span class="p">);</span>
</pre></div>
</div>
<p>becomes</p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="n">V4L2_XXX</span><span class="p">;</span> <span class="n">err</span> <span class="o">=</span> <span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">VIDIOC_XXX</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p class="first">All the different get- and set-format commands were swept into one
<a class="reference internal" href="vidioc-g-fmt.html#vidioc-g-fmt"><span>VIDIOC_G_FMT</span></a> and
<a class="reference internal" href="vidioc-g-fmt.html#vidioc-g-fmt"><span>VIDIOC_S_FMT</span></a> ioctl taking a union and a
type field selecting the union member as parameter. Purpose is to
simplify the API by eliminating several ioctls and to allow new and
driver private data streams without adding new ioctls.</p>
<p>This change obsoletes the following ioctls: <code class="docutils literal"><span class="pre">VIDIOC_S_INFMT</span></code>,
<code class="docutils literal"><span class="pre">VIDIOC_G_INFMT</span></code>, <code class="docutils literal"><span class="pre">VIDIOC_S_OUTFMT</span></code>, <code class="docutils literal"><span class="pre">VIDIOC_G_OUTFMT</span></code>,
<code class="docutils literal"><span class="pre">VIDIOC_S_VBIFMT</span></code> and <code class="docutils literal"><span class="pre">VIDIOC_G_VBIFMT</span></code>. The image format
structure struct <a class="reference internal" href="vidioc-g-fmt.html#c.v4l2_format" title="v4l2_format"><code class="xref c c-type docutils literal"><span class="pre">v4l2_format</span></code></a> was renamed to struct
<a class="reference internal" href="pixfmt-v4l2.html#c.v4l2_pix_format" title="v4l2_pix_format"><code class="xref c c-type docutils literal"><span class="pre">v4l2_pix_format</span></code></a>, while struct
<a class="reference internal" href="vidioc-g-fmt.html#c.v4l2_format" title="v4l2_format"><code class="xref c c-type docutils literal"><span class="pre">v4l2_format</span></code></a> is now the envelopping structure
for all format negotiations.</p>
</li>
<li><p class="first">Similar to the changes above, the <code class="docutils literal"><span class="pre">VIDIOC_G_PARM</span></code> and
<code class="docutils literal"><span class="pre">VIDIOC_S_PARM</span></code> ioctls were merged with <code class="docutils literal"><span class="pre">VIDIOC_G_OUTPARM</span></code> and
<code class="docutils literal"><span class="pre">VIDIOC_S_OUTPARM</span></code>. A <code class="docutils literal"><span class="pre">type</span></code> field in the new struct
<a class="reference internal" href="vidioc-g-parm.html#c.v4l2_streamparm" title="v4l2_streamparm"><code class="xref c c-type docutils literal"><span class="pre">v4l2_streamparm</span></code></a> selects the respective
union member.</p>
<p>This change obsoletes the <code class="docutils literal"><span class="pre">VIDIOC_G_OUTPARM</span></code> and
<code class="docutils literal"><span class="pre">VIDIOC_S_OUTPARM</span></code> ioctls.</p>
</li>
<li><p class="first">Control enumeration was simplified, and two new control flags were
introduced and one dropped. The <code class="docutils literal"><span class="pre">catname</span></code> field was replaced by a
<code class="docutils literal"><span class="pre">group</span></code> field.</p>
<p>Drivers can now flag unsupported and temporarily unavailable controls
with <code class="docutils literal"><span class="pre">V4L2_CTRL_FLAG_DISABLED</span></code> and <code class="docutils literal"><span class="pre">V4L2_CTRL_FLAG_GRABBED</span></code>
respectively. The <code class="docutils literal"><span class="pre">group</span></code> name indicates a possibly narrower
classification than the <code class="docutils literal"><span class="pre">category</span></code>. In other words, there may be
multiple groups within a category. Controls within a group would
typically be drawn within a group box. Controls in different
categories might have a greater separation, or may even appear in
separate windows.</p>
</li>
<li><p class="first">The struct <a class="reference internal" href="buffer.html#c.v4l2_buffer" title="v4l2_buffer"><code class="xref c c-type docutils literal"><span class="pre">v4l2_buffer</span></code></a> <code class="docutils literal"><span class="pre">timestamp</span></code> was
changed to a 64 bit integer, containing the sampling or output time
of the frame in nanoseconds. Additionally timestamps will be in
absolute system time, not starting from zero at the beginning of a
stream. The data type name for timestamps is stamp_t, defined as a
signed 64-bit integer. Output devices should not send a buffer out
until the time in the timestamp field has arrived. I would like to
follow SGI&#8217;s lead, and adopt a multimedia timestamping system like
their UST (Unadjusted System Time). See
<a class="reference external" href="http://web.archive.org/web/*/http://reality.sgi.com">http://web.archive.org/web/*/http://reality.sgi.com</a>
/cpirazzi_engr/lg/time/intro.html. UST uses timestamps that are
64-bit signed integers (not struct timeval&#8217;s) and given in nanosecond
units. The UST clock starts at zero when the system is booted and
runs continuously and uniformly. It takes a little over 292 years for
UST to overflow. There is no way to set the UST clock. The regular
Linux time-of-day clock can be changed periodically, which would
cause errors if it were being used for timestamping a multimedia
stream. A real UST style clock will require some support in the
kernel that is not there yet. But in anticipation, I will change the
timestamp field to a 64-bit integer, and I will change the
v4l2_masterclock_gettime() function (used only by drivers) to
return a 64-bit integer.</p>
</li>
<li><p class="first">A <code class="docutils literal"><span class="pre">sequence</span></code> field was added to struct
<a class="reference internal" href="buffer.html#c.v4l2_buffer" title="v4l2_buffer"><code class="xref c c-type docutils literal"><span class="pre">v4l2_buffer</span></code></a>. The <code class="docutils literal"><span class="pre">sequence</span></code> field counts
captured frames, it is ignored by output devices. When a capture
driver drops a frame, the sequence number of that frame is skipped.</p>
</li>
</ol>
</div>
<div class="section" id="v4l2-version-0-20-incremental-changes">
<h2>6.2.6. V4L2 Version 0.20 incremental changes<a class="headerlink" href="#v4l2-version-0-20-incremental-changes" title="Permalink to this headline">¶</a></h2>
<p>1999-12-23: In struct <a class="reference internal" href="dev-raw-vbi.html#c.v4l2_vbi_format" title="v4l2_vbi_format"><code class="xref c c-type docutils literal"><span class="pre">v4l2_vbi_format</span></code></a> the
<code class="docutils literal"><span class="pre">reserved1</span></code> field became <code class="docutils literal"><span class="pre">offset</span></code>. Previously drivers were required
to clear the <code class="docutils literal"><span class="pre">reserved1</span></code> field.</p>
<p>2000-01-13: The <code class="docutils literal"><span class="pre">V4L2_FMT_FLAG_NOT_INTERLACED</span></code> flag was added.</p>
<p>2000-07-31: The <code class="docutils literal"><span class="pre">linux/poll.h</span></code> header is now included by
<code class="docutils literal"><span class="pre">videodev.h</span></code> for compatibility with the original <code class="docutils literal"><span class="pre">videodev.h</span></code> file.</p>
<p>2000-11-20: <code class="docutils literal"><span class="pre">V4L2_TYPE_VBI_OUTPUT</span></code> and <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_Y41P</span></code> were
added.</p>
<p>2000-11-25: <code class="docutils literal"><span class="pre">V4L2_TYPE_VBI_INPUT</span></code> was added.</p>
<p>2000-12-04: A couple typos in symbol names were fixed.</p>
<p>2001-01-18: To avoid namespace conflicts the <code class="docutils literal"><span class="pre">fourcc</span></code> macro defined in
the <code class="docutils literal"><span class="pre">videodev.h</span></code> header file was renamed to <code class="docutils literal"><span class="pre">v4l2_fourcc</span></code>.</p>
<p>2001-01-25: A possible driver-level compatibility problem between the
<code class="docutils literal"><span class="pre">videodev.h</span></code> file in Linux 2.4.0 and the <code class="docutils literal"><span class="pre">videodev.h</span></code> file included
in the <code class="docutils literal"><span class="pre">videodevX</span></code> patch was fixed. Users of an earlier version of
<code class="docutils literal"><span class="pre">videodevX</span></code> on Linux 2.4.0 should recompile their V4L and V4L2
drivers.</p>
<p>2001-01-26: A possible kernel-level incompatibility between the
<code class="docutils literal"><span class="pre">videodev.h</span></code> file in the <code class="docutils literal"><span class="pre">videodevX</span></code> patch and the <code class="docutils literal"><span class="pre">videodev.h</span></code>
file in Linux 2.2.x with devfs patches applied was fixed.</p>
<p>2001-03-02: Certain V4L ioctls which pass data in both direction
although they are defined with read-only parameter, did not work
correctly through the backward compatibility layer. [Solution?]</p>
<p>2001-04-13: Big endian 16-bit RGB formats were added.</p>
<p>2001-09-17: New YUV formats and the
<a class="reference internal" href="vidioc-g-frequency.html#vidioc-g-frequency"><span>VIDIOC_G_FREQUENCY</span></a> and
<a class="reference internal" href="vidioc-g-frequency.html#vidioc-g-frequency"><span>VIDIOC_S_FREQUENCY</span></a> ioctls were added.
(The old <code class="docutils literal"><span class="pre">VIDIOC_G_FREQ</span></code> and <code class="docutils literal"><span class="pre">VIDIOC_S_FREQ</span></code> ioctls did not take
multiple tuners into account.)</p>
<p>2000-09-18: <code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_VBI</span></code> was added. This may <em>break
compatibility</em> as the <a class="reference internal" href="vidioc-g-fmt.html#vidioc-g-fmt"><span>VIDIOC_G_FMT</span></a> and
<a class="reference internal" href="vidioc-g-fmt.html#vidioc-g-fmt"><span>VIDIOC_S_FMT</span></a> ioctls may fail now if the struct
struct <code class="docutils literal"><span class="pre">v4l2_fmt</span></code> <code class="docutils literal"><span class="pre">type</span></code> field does not contain
<code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_VBI</span></code>. In the documentation of the struct
<a class="reference internal" href="dev-raw-vbi.html#c.v4l2_vbi_format" title="v4l2_vbi_format"><code class="xref c c-type docutils literal"><span class="pre">v4l2_vbi_format</span></code></a> <code class="docutils literal"><span class="pre">offset</span></code> field the
ambiguous phrase &#8220;rising edge&#8221; was changed to &#8220;leading edge&#8221;.</p>
</div>
<div class="section" id="v4l2-version-0-20-2000-11-23">
<h2>6.2.7. V4L2 Version 0.20 2000-11-23<a class="headerlink" href="#v4l2-version-0-20-2000-11-23" title="Permalink to this headline">¶</a></h2>
<p>A number of changes were made to the raw VBI interface.</p>
<ol class="arabic simple">
<li>Figures clarifying the line numbering scheme were added to the V4L2
API specification. The <code class="docutils literal"><span class="pre">start</span></code>[0] and <code class="docutils literal"><span class="pre">start</span></code>[1] fields no
longer count line numbers beginning at zero. Rationale: a) The
previous definition was unclear. b) The <code class="docutils literal"><span class="pre">start</span></code>[] values are
ordinal numbers. c) There is no point in inventing a new line
numbering scheme. We now use line number as defined by ITU-R, period.
Compatibility: Add one to the start values. Applications depending on
the previous semantics may not function correctly.</li>
<li>The restriction &#8220;count[0] &gt; 0 and count[1] &gt; 0&#8221; has been relaxed to
&#8220;(count[0] + count[1]) &gt; 0&#8221;. Rationale: Drivers may allocate
resources at scan line granularity and some data services are
transmitted only on the first field. The comment that both <code class="docutils literal"><span class="pre">count</span></code>
values will usually be equal is misleading and pointless and has been
removed. This change <em>breaks compatibility</em> with earlier versions:
Drivers may return <code class="docutils literal"><span class="pre">EINVAL</span></code>, applications may not function correctly.</li>
<li>Drivers are again permitted to return negative (unknown) start values
as proposed earlier. Why this feature was dropped is unclear. This
change may <em>break compatibility</em> with applications depending on the
start values being positive. The use of <code class="docutils literal"><span class="pre">EBUSY</span></code> and <code class="docutils literal"><span class="pre">EINVAL</span></code>
error codes with the <a class="reference internal" href="vidioc-g-fmt.html#vidioc-g-fmt"><span>VIDIOC_S_FMT</span></a> ioctl was
clarified. The <code class="docutils literal"><span class="pre">EBUSY</span></code> error code was finally documented, and the
<code class="docutils literal"><span class="pre">reserved2</span></code> field which was previously mentioned only in the
<code class="docutils literal"><span class="pre">videodev.h</span></code> header file.</li>
<li>New buffer types <code class="docutils literal"><span class="pre">V4L2_TYPE_VBI_INPUT</span></code> and <code class="docutils literal"><span class="pre">V4L2_TYPE_VBI_OUTPUT</span></code>
were added. The former is an alias for the old <code class="docutils literal"><span class="pre">V4L2_TYPE_VBI</span></code>, the
latter was missing in the <code class="docutils literal"><span class="pre">videodev.h</span></code> file.</li>
</ol>
</div>
<div class="section" id="v4l2-version-0-20-2002-07-25">
<h2>6.2.8. V4L2 Version 0.20 2002-07-25<a class="headerlink" href="#v4l2-version-0-20-2002-07-25" title="Permalink to this headline">¶</a></h2>
<p>Added sliced VBI interface proposal.</p>
</div>
<div class="section" id="v4l2-in-linux-2-5-46-2002-10">
<h2>6.2.9. V4L2 in Linux 2.5.46, 2002-10<a class="headerlink" href="#v4l2-in-linux-2-5-46-2002-10" title="Permalink to this headline">¶</a></h2>
<p>Around October-November 2002, prior to an announced feature freeze of
Linux 2.5, the API was revised, drawing from experience with V4L2 0.20.
This unnamed version was finally merged into Linux 2.5.46.</p>
<ol class="arabic">
<li><p class="first">As specified in <a class="reference internal" href="open.html#related"><span>Related Devices</span></a>, drivers must make related device
functions available under all minor device numbers.</p>
</li>
<li><p class="first">The <a class="reference internal" href="func-open.html#func-open"><span>open()</span></a> function requires access mode
<code class="docutils literal"><span class="pre">O_RDWR</span></code> regardless of the device type. All V4L2 drivers
exchanging data with applications must support the <code class="docutils literal"><span class="pre">O_NONBLOCK</span></code>
flag. The <code class="docutils literal"><span class="pre">O_NOIO</span></code> flag, a V4L2 symbol which aliased the
meaningless <code class="docutils literal"><span class="pre">O_TRUNC</span></code> to indicate accesses without data exchange
(panel applications) was dropped. Drivers must stay in &#8220;panel mode&#8221;
until the application attempts to initiate a data exchange, see
<a class="reference internal" href="open.html#open"><span>Opening and Closing Devices</span></a>.</p>
</li>
<li><p class="first">The struct <a class="reference internal" href="vidioc-querycap.html#c.v4l2_capability" title="v4l2_capability"><code class="xref c c-type docutils literal"><span class="pre">v4l2_capability</span></code></a> changed
dramatically. Note that also the size of the structure changed,
which is encoded in the ioctl request code, thus older V4L2 devices
will respond with an <code class="docutils literal"><span class="pre">EINVAL</span></code> error code to the new
<a class="reference internal" href="vidioc-querycap.html#vidioc-querycap"><span>ioctl VIDIOC_QUERYCAP</span></a> ioctl.</p>
<p>There are new fields to identify the driver, a new RDS device
function <code class="docutils literal"><span class="pre">V4L2_CAP_RDS_CAPTURE</span></code>, the <code class="docutils literal"><span class="pre">V4L2_CAP_AUDIO</span></code> flag
indicates if the device has any audio connectors, another I/O
capability <code class="docutils literal"><span class="pre">V4L2_CAP_ASYNCIO</span></code> can be flagged. In response to these
changes the <code class="docutils literal"><span class="pre">type</span></code> field became a bit set and was merged into the
<code class="docutils literal"><span class="pre">flags</span></code> field. <code class="docutils literal"><span class="pre">V4L2_FLAG_TUNER</span></code> was renamed to
<code class="docutils literal"><span class="pre">V4L2_CAP_TUNER</span></code>, <code class="docutils literal"><span class="pre">V4L2_CAP_VIDEO_OVERLAY</span></code> replaced
<code class="docutils literal"><span class="pre">V4L2_FLAG_PREVIEW</span></code> and <code class="docutils literal"><span class="pre">V4L2_CAP_VBI_CAPTURE</span></code> and
<code class="docutils literal"><span class="pre">V4L2_CAP_VBI_OUTPUT</span></code> replaced <code class="docutils literal"><span class="pre">V4L2_FLAG_DATA_SERVICE</span></code>.
<code class="docutils literal"><span class="pre">V4L2_FLAG_READ</span></code> and <code class="docutils literal"><span class="pre">V4L2_FLAG_WRITE</span></code> were merged into
<code class="docutils literal"><span class="pre">V4L2_CAP_READWRITE</span></code>.</p>
<p>The redundant fields <code class="docutils literal"><span class="pre">inputs</span></code>, <code class="docutils literal"><span class="pre">outputs</span></code> and <code class="docutils literal"><span class="pre">audios</span></code> were
removed. These properties can be determined as described in
<a class="reference internal" href="video.html#video"><span>Video Inputs and Outputs</span></a> and <a class="reference internal" href="audio.html#audio"><span>Audio Inputs and Outputs</span></a>.</p>
<p>The somewhat volatile and therefore barely useful fields
<code class="docutils literal"><span class="pre">maxwidth</span></code>, <code class="docutils literal"><span class="pre">maxheight</span></code>, <code class="docutils literal"><span class="pre">minwidth</span></code>, <code class="docutils literal"><span class="pre">minheight</span></code>,
<code class="docutils literal"><span class="pre">maxframerate</span></code> were removed. This information is available as
described in <a class="reference internal" href="format.html#format"><span>Data Formats</span></a> and <a class="reference internal" href="standard.html#standard"><span>Video Standards</span></a>.</p>
<p><code class="docutils literal"><span class="pre">V4L2_FLAG_SELECT</span></code> was removed. We believe the select() function
is important enough to require support of it in all V4L2 drivers
exchanging data with applications. The redundant
<code class="docutils literal"><span class="pre">V4L2_FLAG_MONOCHROME</span></code> flag was removed, this information is
available as described in <a class="reference internal" href="format.html#format"><span>Data Formats</span></a>.</p>
</li>
<li><p class="first">In struct <a class="reference internal" href="vidioc-enuminput.html#c.v4l2_input" title="v4l2_input"><code class="xref c c-type docutils literal"><span class="pre">v4l2_input</span></code></a> the <code class="docutils literal"><span class="pre">assoc_audio</span></code>
field and the <code class="docutils literal"><span class="pre">capability</span></code> field and its only flag
<code class="docutils literal"><span class="pre">V4L2_INPUT_CAP_AUDIO</span></code> was replaced by the new <code class="docutils literal"><span class="pre">audioset</span></code> field.
Instead of linking one video input to one audio input this field
reports all audio inputs this video input combines with.</p>
<p>New fields are <code class="docutils literal"><span class="pre">tuner</span></code> (reversing the former link from tuners to
video inputs), <code class="docutils literal"><span class="pre">std</span></code> and <code class="docutils literal"><span class="pre">status</span></code>.</p>
<p>Accordingly struct <a class="reference internal" href="vidioc-enumoutput.html#c.v4l2_output" title="v4l2_output"><code class="xref c c-type docutils literal"><span class="pre">v4l2_output</span></code></a> lost its
<code class="docutils literal"><span class="pre">capability</span></code> and <code class="docutils literal"><span class="pre">assoc_audio</span></code> fields. <code class="docutils literal"><span class="pre">audioset</span></code>,
<code class="docutils literal"><span class="pre">modulator</span></code> and <code class="docutils literal"><span class="pre">std</span></code> where added instead.</p>
</li>
<li><p class="first">The struct <a class="reference internal" href="vidioc-g-audio.html#c.v4l2_audio" title="v4l2_audio"><code class="xref c c-type docutils literal"><span class="pre">v4l2_audio</span></code></a> field <code class="docutils literal"><span class="pre">audio</span></code> was
renamed to <code class="docutils literal"><span class="pre">index</span></code>, for consistency with other structures. A new
capability flag <code class="docutils literal"><span class="pre">V4L2_AUDCAP_STEREO</span></code> was added to indicated if the
audio input in question supports stereo sound.
<code class="docutils literal"><span class="pre">V4L2_AUDCAP_EFFECTS</span></code> and the corresponding <code class="docutils literal"><span class="pre">V4L2_AUDMODE</span></code> flags
where removed. This can be easily implemented using controls.
(However the same applies to AVL which is still there.)</p>
<p>Again for consistency the struct
<a class="reference internal" href="vidioc-g-audioout.html#c.v4l2_audioout" title="v4l2_audioout"><code class="xref c c-type docutils literal"><span class="pre">v4l2_audioout</span></code></a> field <code class="docutils literal"><span class="pre">audio</span></code> was renamed
to <code class="docutils literal"><span class="pre">index</span></code>.</p>
</li>
<li><p class="first">The struct <a class="reference internal" href="vidioc-g-tuner.html#c.v4l2_tuner" title="v4l2_tuner"><code class="xref c c-type docutils literal"><span class="pre">v4l2_tuner</span></code></a> <code class="docutils literal"><span class="pre">input</span></code> field was
replaced by an <code class="docutils literal"><span class="pre">index</span></code> field, permitting devices with multiple
tuners. The link between video inputs and tuners is now reversed,
inputs point to their tuner. The <code class="docutils literal"><span class="pre">std</span></code> substructure became a
simple set (more about this below) and moved into struct
<a class="reference internal" href="vidioc-enuminput.html#c.v4l2_input" title="v4l2_input"><code class="xref c c-type docutils literal"><span class="pre">v4l2_input</span></code></a>. A <code class="docutils literal"><span class="pre">type</span></code> field was added.</p>
<p>Accordingly in struct <a class="reference internal" href="vidioc-g-modulator.html#c.v4l2_modulator" title="v4l2_modulator"><code class="xref c c-type docutils literal"><span class="pre">v4l2_modulator</span></code></a> the
<code class="docutils literal"><span class="pre">output</span></code> was replaced by an <code class="docutils literal"><span class="pre">index</span></code> field.</p>
<p>In struct <a class="reference internal" href="vidioc-g-frequency.html#c.v4l2_frequency" title="v4l2_frequency"><code class="xref c c-type docutils literal"><span class="pre">v4l2_frequency</span></code></a> the <code class="docutils literal"><span class="pre">port</span></code>
field was replaced by a <code class="docutils literal"><span class="pre">tuner</span></code> field containing the respective
tuner or modulator index number. A tuner <code class="docutils literal"><span class="pre">type</span></code> field was added
and the <code class="docutils literal"><span class="pre">reserved</span></code> field became larger for future extensions
(satellite tuners in particular).</p>
</li>
<li><p class="first">The idea of completely transparent video standards was dropped.
Experience showed that applications must be able to work with video
standards beyond presenting the user a menu. Instead of enumerating
supported standards with an ioctl applications can now refer to
standards by <a class="reference internal" href="vidioc-enumstd.html#v4l2-std-id"><span>v4l2_std_id</span></a> and symbols
defined in the <code class="docutils literal"><span class="pre">videodev2.h</span></code> header file. For details see
<a class="reference internal" href="standard.html#standard"><span>Video Standards</span></a>. The <a class="reference internal" href="vidioc-g-std.html#vidioc-g-std"><span>VIDIOC_G_STD</span></a> and
<a class="reference internal" href="vidioc-g-std.html#vidioc-g-std"><span>VIDIOC_S_STD</span></a> now take a pointer to this
type as argument. <a class="reference internal" href="vidioc-querystd.html#vidioc-querystd"><span>ioctl VIDIOC_QUERYSTD, VIDIOC_SUBDEV_QUERYSTD</span></a> was
added to autodetect the received standard, if the hardware has this
capability. In struct <a class="reference internal" href="vidioc-enumstd.html#c.v4l2_standard" title="v4l2_standard"><code class="xref c c-type docutils literal"><span class="pre">v4l2_standard</span></code></a> an
<code class="docutils literal"><span class="pre">index</span></code> field was added for
<a class="reference internal" href="vidioc-enumstd.html#vidioc-enumstd"><span>ioctl VIDIOC_ENUMSTD, VIDIOC_SUBDEV_ENUMSTD</span></a>. A
<a class="reference internal" href="vidioc-enumstd.html#v4l2-std-id"><span>v4l2_std_id</span></a> field named <code class="docutils literal"><span class="pre">id</span></code> was added as
machine readable identifier, also replacing the <code class="docutils literal"><span class="pre">transmission</span></code>
field. The misleading <code class="docutils literal"><span class="pre">framerate</span></code> field was renamed to
<code class="docutils literal"><span class="pre">frameperiod</span></code>. The now obsolete <code class="docutils literal"><span class="pre">colorstandard</span></code> information,
originally needed to distguish between variations of standards, were
removed.</p>
<p>Struct <code class="docutils literal"><span class="pre">v4l2_enumstd</span></code> ceased to be.
<a class="reference internal" href="vidioc-enumstd.html#vidioc-enumstd"><span>ioctl VIDIOC_ENUMSTD, VIDIOC_SUBDEV_ENUMSTD</span></a> now takes a pointer to a
struct <a class="reference internal" href="vidioc-enumstd.html#c.v4l2_standard" title="v4l2_standard"><code class="xref c c-type docutils literal"><span class="pre">v4l2_standard</span></code></a> directly. The
information which standards are supported by a particular video
input or output moved into struct <a class="reference internal" href="vidioc-enuminput.html#c.v4l2_input" title="v4l2_input"><code class="xref c c-type docutils literal"><span class="pre">v4l2_input</span></code></a>
and struct <a class="reference internal" href="vidioc-enumoutput.html#c.v4l2_output" title="v4l2_output"><code class="xref c c-type docutils literal"><span class="pre">v4l2_output</span></code></a> fields named <code class="docutils literal"><span class="pre">std</span></code>,
respectively.</p>
</li>
<li><p class="first">The struct <a class="reference internal" href="vidioc-queryctrl.html#v4l2-queryctrl"><span>v4l2_queryctrl</span></a> fields
<code class="docutils literal"><span class="pre">category</span></code> and <code class="docutils literal"><span class="pre">group</span></code> did not catch on and/or were not
implemented as expected and therefore removed.</p>
</li>
<li><p class="first">The <a class="reference internal" href="vidioc-g-fmt.html#vidioc-g-fmt"><span>VIDIOC_TRY_FMT</span></a> ioctl was added to
negotiate data formats as with
<a class="reference internal" href="vidioc-g-fmt.html#vidioc-g-fmt"><span>VIDIOC_S_FMT</span></a>, but without the overhead of
programming the hardware and regardless of I/O in progress.</p>
<p>In struct <a class="reference internal" href="vidioc-g-fmt.html#c.v4l2_format" title="v4l2_format"><code class="xref c c-type docutils literal"><span class="pre">v4l2_format</span></code></a> the <code class="docutils literal"><span class="pre">fmt</span></code> union was
extended to contain struct <a class="reference internal" href="dev-overlay.html#c.v4l2_window" title="v4l2_window"><code class="xref c c-type docutils literal"><span class="pre">v4l2_window</span></code></a>. All
image format negotiations are now possible with <code class="docutils literal"><span class="pre">VIDIOC_G_FMT</span></code>,
<code class="docutils literal"><span class="pre">VIDIOC_S_FMT</span></code> and <code class="docutils literal"><span class="pre">VIDIOC_TRY_FMT</span></code>; ioctl. The <code class="docutils literal"><span class="pre">VIDIOC_G_WIN</span></code>
and <code class="docutils literal"><span class="pre">VIDIOC_S_WIN</span></code> ioctls to prepare for a video overlay were
removed. The <code class="docutils literal"><span class="pre">type</span></code> field changed to type enum
<a class="reference internal" href="buffer.html#c.v4l2_buf_type" title="v4l2_buf_type"><code class="xref c c-type docutils literal"><span class="pre">v4l2_buf_type</span></code></a> and the buffer type names
changed as follows.</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Old defines</th>
<th class="head">enum <a class="reference internal" href="buffer.html#c.v4l2_buf_type" title="v4l2_buf_type"><code class="xref c c-type docutils literal"><span class="pre">v4l2_buf_type</span></code></a></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_CAPTURE</span></code></td>
<td><code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_VIDEO_CAPTURE</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_CODECIN</span></code></td>
<td>Omitted for now</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_CODECOUT</span></code></td>
<td>Omitted for now</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_EFFECTSIN</span></code></td>
<td>Omitted for now</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_EFFECTSIN2</span></code></td>
<td>Omitted for now</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_EFFECTSOUT</span></code></td>
<td>Omitted for now</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_VIDEOOUT</span></code></td>
<td><code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_VIDEO_OUTPUT</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-</span></code></td>
<td><code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_VIDEO_OVERLAY</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-</span></code></td>
<td><code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_VBI_CAPTURE</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-</span></code></td>
<td><code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_VBI_OUTPUT</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-</span></code></td>
<td><code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_SLICED_VBI_CAPTURE</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-</span></code></td>
<td><code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_SLICED_VBI_OUTPUT</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_PRIVATE_BASE</span></code></td>
<td><code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_PRIVATE</span></code> (but this is deprecated)</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">In struct <a class="reference internal" href="vidioc-enum-fmt.html#c.v4l2_fmtdesc" title="v4l2_fmtdesc"><code class="xref c c-type docutils literal"><span class="pre">v4l2_fmtdesc</span></code></a> a enum
<a class="reference internal" href="buffer.html#c.v4l2_buf_type" title="v4l2_buf_type"><code class="xref c c-type docutils literal"><span class="pre">v4l2_buf_type</span></code></a> field named <code class="docutils literal"><span class="pre">type</span></code> was
added as in struct <a class="reference internal" href="vidioc-g-fmt.html#c.v4l2_format" title="v4l2_format"><code class="xref c c-type docutils literal"><span class="pre">v4l2_format</span></code></a>. The
<code class="docutils literal"><span class="pre">VIDIOC_ENUM_FBUFFMT</span></code> ioctl is no longer needed and was removed.
These calls can be replaced by
<a class="reference internal" href="vidioc-enum-fmt.html#vidioc-enum-fmt"><span>ioctl VIDIOC_ENUM_FMT</span></a> with type
<code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_VIDEO_OVERLAY</span></code>.</p>
</li>
<li><p class="first">In struct <a class="reference internal" href="pixfmt-v4l2.html#c.v4l2_pix_format" title="v4l2_pix_format"><code class="xref c c-type docutils literal"><span class="pre">v4l2_pix_format</span></code></a> the <code class="docutils literal"><span class="pre">depth</span></code>
field was removed, assuming applications which recognize the format
by its four-character-code already know the color depth, and others
do not care about it. The same rationale lead to the removal of the
<code class="docutils literal"><span class="pre">V4L2_FMT_FLAG_COMPRESSED</span></code> flag. The
<code class="docutils literal"><span class="pre">V4L2_FMT_FLAG_SWCONVECOMPRESSED</span></code> flag was removed because drivers
are not supposed to convert images in kernel space. A user library
of conversion functions should be provided instead. The
<code class="docutils literal"><span class="pre">V4L2_FMT_FLAG_BYTESPERLINE</span></code> flag was redundant. Applications can
set the <code class="docutils literal"><span class="pre">bytesperline</span></code> field to zero to get a reasonable default.
Since the remaining flags were replaced as well, the <code class="docutils literal"><span class="pre">flags</span></code> field
itself was removed.</p>
<p>The interlace flags were replaced by a enum
<a class="reference internal" href="field-order.html#c.v4l2_field" title="v4l2_field"><code class="xref c c-type docutils literal"><span class="pre">v4l2_field</span></code></a> value in a newly added <code class="docutils literal"><span class="pre">field</span></code>
field.</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Old flag</th>
<th class="head">enum <a class="reference internal" href="field-order.html#c.v4l2_field" title="v4l2_field"><code class="xref c c-type docutils literal"><span class="pre">v4l2_field</span></code></a></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">V4L2_FMT_FLAG_NOT_INTERLACED</span></code></td>
<td>?</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">V4L2_FMT_FLAG_INTERLACED</span></code> = <code class="docutils literal"><span class="pre">V4L2_FMT_FLAG_COMBINED</span></code></td>
<td><code class="docutils literal"><span class="pre">V4L2_FIELD_INTERLACED</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">V4L2_FMT_FLAG_TOPFIELD</span></code> = <code class="docutils literal"><span class="pre">V4L2_FMT_FLAG_ODDFIELD</span></code></td>
<td><code class="docutils literal"><span class="pre">V4L2_FIELD_TOP</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">V4L2_FMT_FLAG_BOTFIELD</span></code> = <code class="docutils literal"><span class="pre">V4L2_FMT_FLAG_EVENFIELD</span></code></td>
<td><code class="docutils literal"><span class="pre">V4L2_FIELD_BOTTOM</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-</span></code></td>
<td><code class="docutils literal"><span class="pre">V4L2_FIELD_SEQ_TB</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-</span></code></td>
<td><code class="docutils literal"><span class="pre">V4L2_FIELD_SEQ_BT</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-</span></code></td>
<td><code class="docutils literal"><span class="pre">V4L2_FIELD_ALTERNATE</span></code></td>
</tr>
</tbody>
</table>
<p>The color space flags were replaced by a enum
<a class="reference internal" href="colorspaces-defs.html#c.v4l2_colorspace" title="v4l2_colorspace"><code class="xref c c-type docutils literal"><span class="pre">v4l2_colorspace</span></code></a> value in a newly added
<code class="docutils literal"><span class="pre">colorspace</span></code> field, where one of <code class="docutils literal"><span class="pre">V4L2_COLORSPACE_SMPTE170M</span></code>,
<code class="docutils literal"><span class="pre">V4L2_COLORSPACE_BT878</span></code>, <code class="docutils literal"><span class="pre">V4L2_COLORSPACE_470_SYSTEM_M</span></code> or
<code class="docutils literal"><span class="pre">V4L2_COLORSPACE_470_SYSTEM_BG</span></code> replaces <code class="docutils literal"><span class="pre">V4L2_FMT_CS_601YUV</span></code>.</p>
</li>
<li><p class="first">In struct <a class="reference internal" href="vidioc-reqbufs.html#c.v4l2_requestbuffers" title="v4l2_requestbuffers"><code class="xref c c-type docutils literal"><span class="pre">v4l2_requestbuffers</span></code></a> the
<code class="docutils literal"><span class="pre">type</span></code> field was properly defined as enum
<a class="reference internal" href="buffer.html#c.v4l2_buf_type" title="v4l2_buf_type"><code class="xref c c-type docutils literal"><span class="pre">v4l2_buf_type</span></code></a>. Buffer types changed as
mentioned above. A new <code class="docutils literal"><span class="pre">memory</span></code> field of type enum
<a class="reference internal" href="buffer.html#c.v4l2_memory" title="v4l2_memory"><code class="xref c c-type docutils literal"><span class="pre">v4l2_memory</span></code></a> was added to distinguish between
I/O methods using buffers allocated by the driver or the
application. See <a class="reference internal" href="io.html#io"><span>Input/Output</span></a> for details.</p>
</li>
<li><p class="first">In struct <a class="reference internal" href="buffer.html#c.v4l2_buffer" title="v4l2_buffer"><code class="xref c c-type docutils literal"><span class="pre">v4l2_buffer</span></code></a> the <code class="docutils literal"><span class="pre">type</span></code> field was
properly defined as enum <a class="reference internal" href="buffer.html#c.v4l2_buf_type" title="v4l2_buf_type"><code class="xref c c-type docutils literal"><span class="pre">v4l2_buf_type</span></code></a>.
Buffer types changed as mentioned above. A <code class="docutils literal"><span class="pre">field</span></code> field of type
enum <a class="reference internal" href="field-order.html#c.v4l2_field" title="v4l2_field"><code class="xref c c-type docutils literal"><span class="pre">v4l2_field</span></code></a> was added to indicate if a
buffer contains a top or bottom field. The old field flags were
removed. Since no unadjusted system time clock was added to the
kernel as planned, the <code class="docutils literal"><span class="pre">timestamp</span></code> field changed back from type
stamp_t, an unsigned 64 bit integer expressing the sample time in
nanoseconds, to struct <code class="xref c c-type docutils literal"><span class="pre">timeval</span></code>. With the addition
of a second memory mapping method the <code class="docutils literal"><span class="pre">offset</span></code> field moved into
union <code class="docutils literal"><span class="pre">m</span></code>, and a new <code class="docutils literal"><span class="pre">memory</span></code> field of type enum
<a class="reference internal" href="buffer.html#c.v4l2_memory" title="v4l2_memory"><code class="xref c c-type docutils literal"><span class="pre">v4l2_memory</span></code></a> was added to distinguish between
I/O methods. See <a class="reference internal" href="io.html#io"><span>Input/Output</span></a> for details.</p>
<p>The <code class="docutils literal"><span class="pre">V4L2_BUF_REQ_CONTIG</span></code> flag was used by the V4L compatibility
layer, after changes to this code it was no longer needed. The
<code class="docutils literal"><span class="pre">V4L2_BUF_ATTR_DEVICEMEM</span></code> flag would indicate if the buffer was
indeed allocated in device memory rather than DMA-able system
memory. It was barely useful and so was removed.</p>
</li>
<li><p class="first">In struct <a class="reference internal" href="vidioc-g-fbuf.html#c.v4l2_framebuffer" title="v4l2_framebuffer"><code class="xref c c-type docutils literal"><span class="pre">v4l2_framebuffer</span></code></a> the
<code class="docutils literal"><span class="pre">base[3]</span></code> array anticipating double- and triple-buffering in
off-screen video memory, however without defining a synchronization
mechanism, was replaced by a single pointer. The
<code class="docutils literal"><span class="pre">V4L2_FBUF_CAP_SCALEUP</span></code> and <code class="docutils literal"><span class="pre">V4L2_FBUF_CAP_SCALEDOWN</span></code> flags were
removed. Applications can determine this capability more accurately
using the new cropping and scaling interface. The
<code class="docutils literal"><span class="pre">V4L2_FBUF_CAP_CLIPPING</span></code> flag was replaced by
<code class="docutils literal"><span class="pre">V4L2_FBUF_CAP_LIST_CLIPPING</span></code> and
<code class="docutils literal"><span class="pre">V4L2_FBUF_CAP_BITMAP_CLIPPING</span></code>.</p>
</li>
<li><p class="first">In struct <a class="reference internal" href="dev-overlay.html#c.v4l2_clip" title="v4l2_clip"><code class="xref c c-type docutils literal"><span class="pre">v4l2_clip</span></code></a> the <code class="docutils literal"><span class="pre">x</span></code>, <code class="docutils literal"><span class="pre">y</span></code>,
<code class="docutils literal"><span class="pre">width</span></code> and <code class="docutils literal"><span class="pre">height</span></code> field moved into a <code class="docutils literal"><span class="pre">c</span></code> substructure of
type struct <a class="reference internal" href="dev-overlay.html#c.v4l2_rect" title="v4l2_rect"><code class="xref c c-type docutils literal"><span class="pre">v4l2_rect</span></code></a>. The <code class="docutils literal"><span class="pre">x</span></code> and <code class="docutils literal"><span class="pre">y</span></code>
fields were renamed to <code class="docutils literal"><span class="pre">left</span></code> and <code class="docutils literal"><span class="pre">top</span></code>, i. e. offsets to a
context dependent origin.</p>
</li>
<li><p class="first">In struct <a class="reference internal" href="dev-overlay.html#c.v4l2_window" title="v4l2_window"><code class="xref c c-type docutils literal"><span class="pre">v4l2_window</span></code></a> the <code class="docutils literal"><span class="pre">x</span></code>, <code class="docutils literal"><span class="pre">y</span></code>,
<code class="docutils literal"><span class="pre">width</span></code> and <code class="docutils literal"><span class="pre">height</span></code> field moved into a <code class="docutils literal"><span class="pre">w</span></code> substructure as
above. A <code class="docutils literal"><span class="pre">field</span></code> field of type <a class="reference internal" href="field-order.html#c.v4l2_field" title="v4l2_field"><code class="xref c c-type docutils literal"><span class="pre">v4l2_field</span></code></a> was added to
distinguish between field and frame (interlaced) overlay.</p>
</li>
<li><p class="first">The digital zoom interface, including struct
struct <code class="docutils literal"><span class="pre">v4l2_zoomcap</span></code>, struct
struct <code class="docutils literal"><span class="pre">v4l2_zoom</span></code>, <code class="docutils literal"><span class="pre">V4L2_ZOOM_NONCAP</span></code> and
<code class="docutils literal"><span class="pre">V4L2_ZOOM_WHILESTREAMING</span></code> was replaced by a new cropping and
scaling interface. The previously unused struct
struct <a class="reference internal" href="vidioc-cropcap.html#c.v4l2_cropcap" title="v4l2_cropcap"><code class="xref c c-type docutils literal"><span class="pre">v4l2_cropcap</span></code></a> and struct <a class="reference internal" href="vidioc-g-crop.html#c.v4l2_crop" title="v4l2_crop"><code class="xref c c-type docutils literal"><span class="pre">v4l2_crop</span></code></a>
where redefined for this purpose. See <a class="reference internal" href="crop.html#crop"><span>Image Cropping, Insertion and Scaling &#8211; the CROP API</span></a> for details.</p>
</li>
<li><p class="first">In struct <a class="reference internal" href="dev-raw-vbi.html#c.v4l2_vbi_format" title="v4l2_vbi_format"><code class="xref c c-type docutils literal"><span class="pre">v4l2_vbi_format</span></code></a> the
<code class="docutils literal"><span class="pre">SAMPLE_FORMAT</span></code> field now contains a four-character-code as used
to identify video image formats and <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_GREY</span></code> replaces
the <code class="docutils literal"><span class="pre">V4L2_VBI_SF_UBYTE</span></code> define. The <code class="docutils literal"><span class="pre">reserved</span></code> field was
extended.</p>
</li>
<li><p class="first">In struct <a class="reference internal" href="vidioc-g-parm.html#c.v4l2_captureparm" title="v4l2_captureparm"><code class="xref c c-type docutils literal"><span class="pre">v4l2_captureparm</span></code></a> the type of
the <code class="docutils literal"><span class="pre">timeperframe</span></code> field changed from unsigned long to struct
<a class="reference internal" href="vidioc-enumstd.html#c.v4l2_fract" title="v4l2_fract"><code class="xref c c-type docutils literal"><span class="pre">v4l2_fract</span></code></a>. This allows the accurate
expression of multiples of the NTSC-M frame rate 30000 / 1001. A new
field <code class="docutils literal"><span class="pre">readbuffers</span></code> was added to control the driver behaviour in
read I/O mode.</p>
<p>Similar changes were made to struct
<a class="reference internal" href="vidioc-g-parm.html#c.v4l2_outputparm" title="v4l2_outputparm"><code class="xref c c-type docutils literal"><span class="pre">v4l2_outputparm</span></code></a>.</p>
</li>
<li><p class="first">The struct <code class="docutils literal"><span class="pre">v4l2_performance</span></code> and
<code class="docutils literal"><span class="pre">VIDIOC_G_PERF</span></code> ioctl were dropped. Except when using the
<a class="reference internal" href="rw.html#rw"><span>read/write I/O method</span></a>, which is limited anyway, this
information is already available to applications.</p>
</li>
<li><p class="first">The example transformation from RGB to YCbCr color space in the old
V4L2 documentation was inaccurate, this has been corrected in
<a class="reference internal" href="pixfmt.html#pixfmt"><span>Image Formats</span></a>.</p>
</li>
</ol>
</div>
<div class="section" id="v4l2-2003-06-19">
<h2>6.2.10. V4L2 2003-06-19<a class="headerlink" href="#v4l2-2003-06-19" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">A new capability flag <code class="docutils literal"><span class="pre">V4L2_CAP_RADIO</span></code> was added for radio devices.
Prior to this change radio devices would identify solely by having
exactly one tuner whose type field reads <code class="docutils literal"><span class="pre">V4L2_TUNER_RADIO</span></code>.</p>
</li>
<li><p class="first">An optional driver access priority mechanism was added, see
<a class="reference internal" href="app-pri.html#app-pri"><span>Application Priority</span></a> for details.</p>
</li>
<li><p class="first">The audio input and output interface was found to be incomplete.</p>
<p>Previously the <a class="reference internal" href="vidioc-g-audio.html#vidioc-g-audio"><span>VIDIOC_G_AUDIO</span></a> ioctl would
enumerate the available audio inputs. An ioctl to determine the
current audio input, if more than one combines with the current video
input, did not exist. So <code class="docutils literal"><span class="pre">VIDIOC_G_AUDIO</span></code> was renamed to
<code class="docutils literal"><span class="pre">VIDIOC_G_AUDIO_OLD</span></code>, this ioctl was removed on Kernel 2.6.39. The
<a class="reference internal" href="vidioc-enumaudio.html#vidioc-enumaudio"><span>ioctl VIDIOC_ENUMAUDIO</span></a> ioctl was added to
enumerate audio inputs, while
<a class="reference internal" href="vidioc-g-audio.html#vidioc-g-audio"><span>VIDIOC_G_AUDIO</span></a> now reports the current
audio input.</p>
<p>The same changes were made to
<a class="reference internal" href="vidioc-g-audioout.html#vidioc-g-audout"><span>VIDIOC_G_AUDOUT</span></a> and
<a class="reference internal" href="vidioc-enumaudioout.html#vidioc-enumaudout"><span>VIDIOC_ENUMAUDOUT</span></a>.</p>
<p>Until further the &#8220;videodev&#8221; module will automatically translate
between the old and new ioctls, but drivers and applications must be
updated to successfully compile again.</p>
</li>
<li><p class="first">The <a class="reference internal" href="vidioc-overlay.html#vidioc-overlay"><span>ioctl VIDIOC_OVERLAY</span></a> ioctl was incorrectly
defined with write-read parameter. It was changed to write-only,
while the write-read version was renamed to <code class="docutils literal"><span class="pre">VIDIOC_OVERLAY_OLD</span></code>.
The old ioctl was removed on Kernel 2.6.39. Until further the
&#8220;videodev&#8221; kernel module will automatically translate to the new
version, so drivers must be recompiled, but not applications.</p>
</li>
<li><p class="first"><a class="reference internal" href="dev-overlay.html#overlay"><span>Video Overlay Interface</span></a> incorrectly stated that clipping rectangles define
regions where the video can be seen. Correct is that clipping
rectangles define regions where <em>no</em> video shall be displayed and so
the graphics surface can be seen.</p>
</li>
<li><p class="first">The <a class="reference internal" href="vidioc-g-parm.html#vidioc-g-parm"><span>VIDIOC_S_PARM</span></a> and
<a class="reference internal" href="vidioc-g-ctrl.html#vidioc-g-ctrl"><span>VIDIOC_S_CTRL</span></a> ioctls were defined with
write-only parameter, inconsistent with other ioctls modifying their
argument. They were changed to write-read, while a <code class="docutils literal"><span class="pre">_OLD</span></code> suffix
was added to the write-only versions. The old ioctls were removed on
Kernel 2.6.39. Drivers and applications assuming a constant parameter
need an update.</p>
</li>
</ol>
</div>
<div class="section" id="v4l2-2003-11-05">
<h2>6.2.11. V4L2 2003-11-05<a class="headerlink" href="#v4l2-2003-11-05" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">In <a class="reference internal" href="pixfmt-rgb.html#pixfmt-rgb"><span>RGB Formats</span></a> the following pixel formats were incorrectly
transferred from Bill Dirks&#8217; V4L2 specification. Descriptions below
refer to bytes in memory, in ascending address order.</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Symbol</th>
<th class="head">In this document prior to revision 0.5</th>
<th class="head">Corrected</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">V4L2_PIX_FMT_RGB24</span></code></td>
<td>B, G, R</td>
<td>R, G, B</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">V4L2_PIX_FMT_BGR24</span></code></td>
<td>R, G, B</td>
<td>B, G, R</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">V4L2_PIX_FMT_RGB32</span></code></td>
<td>B, G, R, X</td>
<td>R, G, B, X</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">V4L2_PIX_FMT_BGR32</span></code></td>
<td>R, G, B, X</td>
<td>B, G, R, X</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_BGR24</span></code> example was always correct.</p>
<p>In <a class="reference internal" href="diff-v4l.html#v4l-image-properties"><span>Image Properties</span></a> the mapping of the V4L
<code class="docutils literal"><span class="pre">VIDEO_PALETTE_RGB24</span></code> and <code class="docutils literal"><span class="pre">VIDEO_PALETTE_RGB32</span></code> formats to V4L2
pixel formats was accordingly corrected.</p>
</li>
<li><p class="first">Unrelated to the fixes above, drivers may still interpret some V4L2
RGB pixel formats differently. These issues have yet to be addressed,
for details see <a class="reference internal" href="pixfmt-rgb.html#pixfmt-rgb"><span>RGB Formats</span></a>.</p>
</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-6-2004-05-09">
<h2>6.2.12. V4L2 in Linux 2.6.6, 2004-05-09<a class="headerlink" href="#v4l2-in-linux-2-6-6-2004-05-09" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>The <a class="reference internal" href="vidioc-cropcap.html#vidioc-cropcap"><span>ioctl VIDIOC_CROPCAP</span></a> ioctl was incorrectly
defined with read-only parameter. It is now defined as write-read
ioctl, while the read-only version was renamed to
<code class="docutils literal"><span class="pre">VIDIOC_CROPCAP_OLD</span></code>. The old ioctl was removed on Kernel 2.6.39.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-8">
<h2>6.2.13. V4L2 in Linux 2.6.8<a class="headerlink" href="#v4l2-in-linux-2-6-8" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>A new field <code class="docutils literal"><span class="pre">input</span></code> (former <code class="docutils literal"><span class="pre">reserved[0]</span></code>) was added to the
struct <a class="reference internal" href="buffer.html#c.v4l2_buffer" title="v4l2_buffer"><code class="xref c c-type docutils literal"><span class="pre">v4l2_buffer</span></code></a> structure. Purpose of this
field is to alternate between video inputs (e. g. cameras) in step
with the video capturing process. This function must be enabled with
the new <code class="docutils literal"><span class="pre">V4L2_BUF_FLAG_INPUT</span></code> flag. The <code class="docutils literal"><span class="pre">flags</span></code> field is no
longer read-only.</li>
</ol>
</div>
<div class="section" id="v4l2-spec-erratum-2004-08-01">
<h2>6.2.14. V4L2 spec erratum 2004-08-01<a class="headerlink" href="#v4l2-spec-erratum-2004-08-01" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>The return value of the <a class="reference internal" href="func-open.html#func-open"><span>V4L2 open()</span></a> function was incorrectly
documented.</li>
<li>Audio output ioctls end in -AUDOUT, not -AUDIOOUT.</li>
<li>In the Current Audio Input example the <code class="docutils literal"><span class="pre">VIDIOC_G_AUDIO</span></code> ioctl took
the wrong argument.</li>
<li>The documentation of the <a class="reference internal" href="vidioc-qbuf.html#vidioc-qbuf"><span>ioctl VIDIOC_QBUF, VIDIOC_DQBUF</span></a> and
<a class="reference internal" href="vidioc-qbuf.html#vidioc-qbuf"><span>VIDIOC_DQBUF</span></a> ioctls did not mention the
struct <a class="reference internal" href="buffer.html#c.v4l2_buffer" title="v4l2_buffer"><code class="xref c c-type docutils literal"><span class="pre">v4l2_buffer</span></code></a> <code class="docutils literal"><span class="pre">memory</span></code> field. It was
also missing from examples. Also on the <code class="docutils literal"><span class="pre">VIDIOC_DQBUF</span></code> page the <code class="docutils literal"><span class="pre">EIO</span></code>
error code was not documented.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-14">
<h2>6.2.15. V4L2 in Linux 2.6.14<a class="headerlink" href="#v4l2-in-linux-2-6-14" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>A new sliced VBI interface was added. It is documented in
<a class="reference internal" href="dev-sliced-vbi.html#sliced"><span>Sliced VBI Data Interface</span></a> and replaces the interface first proposed in V4L2
specification 0.8.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-15">
<h2>6.2.16. V4L2 in Linux 2.6.15<a class="headerlink" href="#v4l2-in-linux-2-6-15" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>The <a class="reference internal" href="vidioc-log-status.html#vidioc-log-status"><span>ioctl VIDIOC_LOG_STATUS</span></a> ioctl was added.</li>
<li>New video standards <code class="docutils literal"><span class="pre">V4L2_STD_NTSC_443</span></code>, <code class="docutils literal"><span class="pre">V4L2_STD_SECAM_LC</span></code>,
<code class="docutils literal"><span class="pre">V4L2_STD_SECAM_DK</span></code> (a set of SECAM D, K and K1), and
<code class="docutils literal"><span class="pre">V4L2_STD_ATSC</span></code> (a set of <code class="docutils literal"><span class="pre">V4L2_STD_ATSC_8_VSB</span></code> and
<code class="docutils literal"><span class="pre">V4L2_STD_ATSC_16_VSB</span></code>) were defined. Note the <code class="docutils literal"><span class="pre">V4L2_STD_525_60</span></code>
set now includes <code class="docutils literal"><span class="pre">V4L2_STD_NTSC_443</span></code>. See also
<a class="reference internal" href="vidioc-enumstd.html#v4l2-std-id"><span>typedef v4l2_std_id</span></a>.</li>
<li>The <code class="docutils literal"><span class="pre">VIDIOC_G_COMP</span></code> and <code class="docutils literal"><span class="pre">VIDIOC_S_COMP</span></code> ioctl were renamed to
<code class="docutils literal"><span class="pre">VIDIOC_G_MPEGCOMP</span></code> and <code class="docutils literal"><span class="pre">VIDIOC_S_MPEGCOMP</span></code> respectively. Their
argument was replaced by a struct
<code class="docutils literal"><span class="pre">v4l2_mpeg_compression</span></code> pointer. (The
<code class="docutils literal"><span class="pre">VIDIOC_G_MPEGCOMP</span></code> and <code class="docutils literal"><span class="pre">VIDIOC_S_MPEGCOMP</span></code> ioctls where removed
in Linux 2.6.25.)</li>
</ol>
</div>
<div class="section" id="v4l2-spec-erratum-2005-11-27">
<h2>6.2.17. V4L2 spec erratum 2005-11-27<a class="headerlink" href="#v4l2-spec-erratum-2005-11-27" title="Permalink to this headline">¶</a></h2>
<p>The capture example in <a class="reference internal" href="capture-example.html#capture-example"><span>Video Capture Example</span></a> called the
<a class="reference internal" href="vidioc-g-crop.html#vidioc-g-crop"><span>VIDIOC_S_CROP</span></a> ioctl without checking if
cropping is supported. In the video standard selection example in
<a class="reference internal" href="standard.html#standard"><span>Video Standards</span></a> the <a class="reference internal" href="vidioc-g-std.html#vidioc-g-std"><span>VIDIOC_S_STD</span></a> call used
the wrong argument type.</p>
</div>
<div class="section" id="v4l2-spec-erratum-2006-01-10">
<h2>6.2.18. V4L2 spec erratum 2006-01-10<a class="headerlink" href="#v4l2-spec-erratum-2006-01-10" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>The <code class="docutils literal"><span class="pre">V4L2_IN_ST_COLOR_KILL</span></code> flag in struct
<a class="reference internal" href="vidioc-enuminput.html#c.v4l2_input" title="v4l2_input"><code class="xref c c-type docutils literal"><span class="pre">v4l2_input</span></code></a> not only indicates if the color
killer is enabled, but also if it is active. (The color killer
disables color decoding when it detects no color in the video signal
to improve the image quality.)</li>
<li><a class="reference internal" href="vidioc-g-parm.html#vidioc-g-parm"><span>VIDIOC_S_PARM</span></a> is a write-read ioctl, not
write-only as stated on its reference page. The ioctl changed in 2003
as noted above.</li>
</ol>
</div>
<div class="section" id="v4l2-spec-erratum-2006-02-03">
<h2>6.2.19. V4L2 spec erratum 2006-02-03<a class="headerlink" href="#v4l2-spec-erratum-2006-02-03" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>In struct <a class="reference internal" href="vidioc-g-parm.html#c.v4l2_captureparm" title="v4l2_captureparm"><code class="xref c c-type docutils literal"><span class="pre">v4l2_captureparm</span></code></a> and struct
<a class="reference internal" href="vidioc-g-parm.html#c.v4l2_outputparm" title="v4l2_outputparm"><code class="xref c c-type docutils literal"><span class="pre">v4l2_outputparm</span></code></a> the <code class="docutils literal"><span class="pre">timeperframe</span></code>
field gives the time in seconds, not microseconds.</li>
</ol>
</div>
<div class="section" id="v4l2-spec-erratum-2006-02-04">
<h2>6.2.20. V4L2 spec erratum 2006-02-04<a class="headerlink" href="#v4l2-spec-erratum-2006-02-04" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>The <code class="docutils literal"><span class="pre">clips</span></code> field in struct <a class="reference internal" href="dev-overlay.html#c.v4l2_window" title="v4l2_window"><code class="xref c c-type docutils literal"><span class="pre">v4l2_window</span></code></a>
must point to an array of struct <a class="reference internal" href="dev-overlay.html#c.v4l2_clip" title="v4l2_clip"><code class="xref c c-type docutils literal"><span class="pre">v4l2_clip</span></code></a>, not
a linked list, because drivers ignore the struct
struct <a class="reference internal" href="dev-overlay.html#c.v4l2_clip" title="v4l2_clip"><code class="xref c c-type docutils literal"><span class="pre">v4l2_clip</span></code></a>. <code class="docutils literal"><span class="pre">next</span></code> pointer.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-17">
<h2>6.2.21. V4L2 in Linux 2.6.17<a class="headerlink" href="#v4l2-in-linux-2-6-17" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>New video standard macros were added: <code class="docutils literal"><span class="pre">V4L2_STD_NTSC_M_KR</span></code> (NTSC M
South Korea), and the sets <code class="docutils literal"><span class="pre">V4L2_STD_MN</span></code>, <code class="docutils literal"><span class="pre">V4L2_STD_B</span></code>,
<code class="docutils literal"><span class="pre">V4L2_STD_GH</span></code> and <code class="docutils literal"><span class="pre">V4L2_STD_DK</span></code>. The <code class="docutils literal"><span class="pre">V4L2_STD_NTSC</span></code> and
<code class="docutils literal"><span class="pre">V4L2_STD_SECAM</span></code> sets now include <code class="docutils literal"><span class="pre">V4L2_STD_NTSC_M_KR</span></code> and
<code class="docutils literal"><span class="pre">V4L2_STD_SECAM_LC</span></code> respectively.</li>
<li>A new <code class="docutils literal"><span class="pre">V4L2_TUNER_MODE_LANG1_LANG2</span></code> was defined to record both
languages of a bilingual program. The use of
<code class="docutils literal"><span class="pre">V4L2_TUNER_MODE_STEREO</span></code> for this purpose is deprecated now. See
the <a class="reference internal" href="vidioc-g-tuner.html#vidioc-g-tuner"><span>VIDIOC_G_TUNER</span></a> section for details.</li>
</ol>
</div>
<div class="section" id="v4l2-spec-erratum-2006-09-23-draft-0-15">
<h2>6.2.22. V4L2 spec erratum 2006-09-23 (Draft 0.15)<a class="headerlink" href="#v4l2-spec-erratum-2006-09-23-draft-0-15" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>In various places <code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_SLICED_VBI_CAPTURE</span></code> and
<code class="docutils literal"><span class="pre">V4L2_BUF_TYPE_SLICED_VBI_OUTPUT</span></code> of the sliced VBI interface were
not mentioned along with other buffer types.</li>
<li>In <a class="reference internal" href="vidioc-g-audio.html#vidioc-g-audio"><span>VIDIOC_G_AUDIO</span></a> it was clarified that the struct
<a class="reference internal" href="vidioc-g-audio.html#c.v4l2_audio" title="v4l2_audio"><code class="xref c c-type docutils literal"><span class="pre">v4l2_audio</span></code></a> <code class="docutils literal"><span class="pre">mode</span></code> field is a flags field.</li>
<li><a class="reference internal" href="vidioc-querycap.html#vidioc-querycap"><span>ioctl VIDIOC_QUERYCAP</span></a> did not mention the sliced VBI and radio
capability flags.</li>
<li>In <a class="reference internal" href="vidioc-g-frequency.html#vidioc-g-frequency"><span>VIDIOC_G_FREQUENCY</span></a> it was clarified that applications
must initialize the tuner <code class="docutils literal"><span class="pre">type</span></code> field of struct
<a class="reference internal" href="vidioc-g-frequency.html#c.v4l2_frequency" title="v4l2_frequency"><code class="xref c c-type docutils literal"><span class="pre">v4l2_frequency</span></code></a> before calling
<a class="reference internal" href="vidioc-g-frequency.html#vidioc-g-frequency"><span>VIDIOC_S_FREQUENCY</span></a>.</li>
<li>The <code class="docutils literal"><span class="pre">reserved</span></code> array in struct
<a class="reference internal" href="vidioc-reqbufs.html#c.v4l2_requestbuffers" title="v4l2_requestbuffers"><code class="xref c c-type docutils literal"><span class="pre">v4l2_requestbuffers</span></code></a> has 2 elements,
not 32.</li>
<li>In <a class="reference internal" href="dev-output.html#output"><span>Video Output Interface</span></a> and <a class="reference internal" href="dev-raw-vbi.html#raw-vbi"><span>Raw VBI Data Interface</span></a> the device file names
<code class="docutils literal"><span class="pre">/dev/vout</span></code> which never caught on were replaced by <code class="docutils literal"><span class="pre">/dev/video</span></code>.</li>
<li>With Linux 2.6.15 the possible range for VBI device minor numbers was
extended from 224-239 to 224-255. Accordingly device file names
<code class="docutils literal"><span class="pre">/dev/vbi0</span></code> to <code class="docutils literal"><span class="pre">/dev/vbi31</span></code> are possible now.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-18">
<h2>6.2.23. V4L2 in Linux 2.6.18<a class="headerlink" href="#v4l2-in-linux-2-6-18" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>New ioctls <a class="reference internal" href="vidioc-g-ext-ctrls.html#vidioc-g-ext-ctrls"><span>VIDIOC_G_EXT_CTRLS</span></a>,
<a class="reference internal" href="vidioc-g-ext-ctrls.html#vidioc-g-ext-ctrls"><span>VIDIOC_S_EXT_CTRLS</span></a> and
<a class="reference internal" href="vidioc-g-ext-ctrls.html#vidioc-g-ext-ctrls"><span>VIDIOC_TRY_EXT_CTRLS</span></a> were added, a
flag to skip unsupported controls with
<a class="reference internal" href="vidioc-queryctrl.html#vidioc-queryctrl"><span>ioctls VIDIOC_QUERYCTRL, VIDIOC_QUERY_EXT_CTRL and VIDIOC_QUERYMENU</span></a>, new control types
<code class="docutils literal"><span class="pre">V4L2_CTRL_TYPE_INTEGER64</span></code> and <code class="docutils literal"><span class="pre">V4L2_CTRL_TYPE_CTRL_CLASS</span></code>
(<a class="reference internal" href="vidioc-queryctrl.html#c.v4l2_ctrl_type" title="v4l2_ctrl_type"><code class="xref c c-type docutils literal"><span class="pre">v4l2_ctrl_type</span></code></a>), and new control flags
<code class="docutils literal"><span class="pre">V4L2_CTRL_FLAG_READ_ONLY</span></code>, <code class="docutils literal"><span class="pre">V4L2_CTRL_FLAG_UPDATE</span></code>,
<code class="docutils literal"><span class="pre">V4L2_CTRL_FLAG_INACTIVE</span></code> and <code class="docutils literal"><span class="pre">V4L2_CTRL_FLAG_SLIDER</span></code>
(<a class="reference internal" href="vidioc-queryctrl.html#control-flags"><span>Control Flags</span></a>). See <a class="reference internal" href="extended-controls.html#extended-controls"><span>Extended Controls</span></a> for details.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-19">
<h2>6.2.24. V4L2 in Linux 2.6.19<a class="headerlink" href="#v4l2-in-linux-2-6-19" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>In struct <a class="reference internal" href="vidioc-g-sliced-vbi-cap.html#c.v4l2_sliced_vbi_cap" title="v4l2_sliced_vbi_cap"><code class="xref c c-type docutils literal"><span class="pre">v4l2_sliced_vbi_cap</span></code></a> a
buffer type field was added replacing a reserved field. Note on
architectures where the size of enum types differs from int types the
size of the structure changed. The
<a class="reference internal" href="vidioc-g-sliced-vbi-cap.html#vidioc-g-sliced-vbi-cap"><span>VIDIOC_G_SLICED_VBI_CAP</span></a> ioctl
was redefined from being read-only to write-read. Applications must
initialize the type field and clear the reserved fields now. These
changes may <em>break the compatibility</em> with older drivers and
applications.</li>
<li>The ioctls <a class="reference internal" href="vidioc-enum-framesizes.html#vidioc-enum-framesizes"><span>ioctl VIDIOC_ENUM_FRAMESIZES</span></a>
and
<a class="reference internal" href="vidioc-enum-frameintervals.html#vidioc-enum-frameintervals"><span>ioctl VIDIOC_ENUM_FRAMEINTERVALS</span></a>
were added.</li>
<li>A new pixel format <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_RGB444</span></code> (<a class="reference internal" href="pixfmt-packed-rgb.html#rgb-formats"><span>Packed RGB Image Formats</span></a>) was
added.</li>
</ol>
</div>
<div class="section" id="v4l2-spec-erratum-2006-10-12-draft-0-17">
<h2>6.2.25. V4L2 spec erratum 2006-10-12 (Draft 0.17)<a class="headerlink" href="#v4l2-spec-erratum-2006-10-12-draft-0-17" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">V4L2_PIX_FMT_HM12</span></code> (<a class="reference internal" href="pixfmt-reserved.html#reserved-formats"><span>Reserved Image Formats</span></a>) is a YUV 4:2:0, not
4:2:2 format.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-21">
<h2>6.2.26. V4L2 in Linux 2.6.21<a class="headerlink" href="#v4l2-in-linux-2-6-21" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>The <code class="docutils literal"><span class="pre">videodev2.h</span></code> header file is now dual licensed under GNU
General Public License version two or later, and under a 3-clause
BSD-style license.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-22">
<h2>6.2.27. V4L2 in Linux 2.6.22<a class="headerlink" href="#v4l2-in-linux-2-6-22" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Two new field orders <code class="docutils literal"><span class="pre">V4L2_FIELD_INTERLACED_TB</span></code> and
<code class="docutils literal"><span class="pre">V4L2_FIELD_INTERLACED_BT</span></code> were added. See <a class="reference internal" href="field-order.html#c.v4l2_field" title="v4l2_field"><code class="xref c c-type docutils literal"><span class="pre">v4l2_field</span></code></a> for
details.</p>
</li>
<li><p class="first">Three new clipping/blending methods with a global or straight or
inverted local alpha value were added to the video overlay interface.
See the description of the <a class="reference internal" href="vidioc-g-fbuf.html#vidioc-g-fbuf"><span>VIDIOC_G_FBUF</span></a>
and <a class="reference internal" href="vidioc-g-fbuf.html#vidioc-g-fbuf"><span>VIDIOC_S_FBUF</span></a> ioctls for details.</p>
<p>A new <code class="docutils literal"><span class="pre">global_alpha</span></code> field was added to
<a class="reference internal" href="dev-overlay.html#c.v4l2_window" title="v4l2_window"><code class="xref c c-type docutils literal"><span class="pre">v4l2_window</span></code></a>, extending the structure. This
may <em>break compatibility</em> with applications using a struct
struct <a class="reference internal" href="dev-overlay.html#c.v4l2_window" title="v4l2_window"><code class="xref c c-type docutils literal"><span class="pre">v4l2_window</span></code></a> directly. However the
<a class="reference internal" href="vidioc-g-fmt.html#vidioc-g-fmt"><span>VIDIOC_G/S/TRY_FMT</span></a> ioctls, which take a
pointer to a <a class="reference internal" href="vidioc-g-fmt.html#c.v4l2_format" title="v4l2_format"><code class="xref c c-type docutils literal"><span class="pre">v4l2_format</span></code></a> parent structure
with padding bytes at the end, are not affected.</p>
</li>
<li><p class="first">The format of the <code class="docutils literal"><span class="pre">chromakey</span></code> field in struct
<a class="reference internal" href="dev-overlay.html#c.v4l2_window" title="v4l2_window"><code class="xref c c-type docutils literal"><span class="pre">v4l2_window</span></code></a> changed from &#8220;host order RGB32&#8221;
to a pixel value in the same format as the framebuffer. This may
<em>break compatibility</em> with existing applications. Drivers supporting
the &#8220;host order RGB32&#8221; format are not known.</p>
</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-24">
<h2>6.2.28. V4L2 in Linux 2.6.24<a class="headerlink" href="#v4l2-in-linux-2-6-24" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>The pixel formats <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_PAL8</span></code>, <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_YUV444</span></code>,
<code class="docutils literal"><span class="pre">V4L2_PIX_FMT_YUV555</span></code>, <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_YUV565</span></code> and
<code class="docutils literal"><span class="pre">V4L2_PIX_FMT_YUV32</span></code> were added.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-25">
<h2>6.2.29. V4L2 in Linux 2.6.25<a class="headerlink" href="#v4l2-in-linux-2-6-25" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>The pixel formats <a class="reference internal" href="pixfmt-y16.html#v4l2-pix-fmt-y16"><span>V4L2_PIX_FMT_Y16</span></a> and
<a class="reference internal" href="pixfmt-srggb16.html#v4l2-pix-fmt-sbggr16"><span>V4L2_PIX_FMT_SBGGR16</span></a> were added.</li>
<li>New <a class="reference internal" href="control.html#control"><span>controls</span></a> <code class="docutils literal"><span class="pre">V4L2_CID_POWER_LINE_FREQUENCY</span></code>,
<code class="docutils literal"><span class="pre">V4L2_CID_HUE_AUTO</span></code>, <code class="docutils literal"><span class="pre">V4L2_CID_WHITE_BALANCE_TEMPERATURE</span></code>,
<code class="docutils literal"><span class="pre">V4L2_CID_SHARPNESS</span></code> and <code class="docutils literal"><span class="pre">V4L2_CID_BACKLIGHT_COMPENSATION</span></code> were
added. The controls <code class="docutils literal"><span class="pre">V4L2_CID_BLACK_LEVEL</span></code>, <code class="docutils literal"><span class="pre">V4L2_CID_WHITENESS</span></code>,
<code class="docutils literal"><span class="pre">V4L2_CID_HCENTER</span></code> and <code class="docutils literal"><span class="pre">V4L2_CID_VCENTER</span></code> were deprecated.</li>
<li>A <a class="reference internal" href="extended-controls.html#camera-controls"><span>Camera controls class</span></a> was added, with
the new controls <code class="docutils literal"><span class="pre">V4L2_CID_EXPOSURE_AUTO</span></code>,
<code class="docutils literal"><span class="pre">V4L2_CID_EXPOSURE_ABSOLUTE</span></code>, <code class="docutils literal"><span class="pre">V4L2_CID_EXPOSURE_AUTO_PRIORITY</span></code>,
<code class="docutils literal"><span class="pre">V4L2_CID_PAN_RELATIVE</span></code>, <code class="docutils literal"><span class="pre">V4L2_CID_TILT_RELATIVE</span></code>,
<code class="docutils literal"><span class="pre">V4L2_CID_PAN_RESET</span></code>, <code class="docutils literal"><span class="pre">V4L2_CID_TILT_RESET</span></code>,
<code class="docutils literal"><span class="pre">V4L2_CID_PAN_ABSOLUTE</span></code>, <code class="docutils literal"><span class="pre">V4L2_CID_TILT_ABSOLUTE</span></code>,
<code class="docutils literal"><span class="pre">V4L2_CID_FOCUS_ABSOLUTE</span></code>, <code class="docutils literal"><span class="pre">V4L2_CID_FOCUS_RELATIVE</span></code> and
<code class="docutils literal"><span class="pre">V4L2_CID_FOCUS_AUTO</span></code>.</li>
<li>The <code class="docutils literal"><span class="pre">VIDIOC_G_MPEGCOMP</span></code> and <code class="docutils literal"><span class="pre">VIDIOC_S_MPEGCOMP</span></code> ioctls, which
were superseded by the <a class="reference internal" href="extended-controls.html#extended-controls"><span>extended controls</span></a>
interface in Linux 2.6.18, where finally removed from the
<code class="docutils literal"><span class="pre">videodev2.h</span></code> header file.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-26">
<h2>6.2.30. V4L2 in Linux 2.6.26<a class="headerlink" href="#v4l2-in-linux-2-6-26" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>The pixel formats <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_Y16</span></code> and <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_SBGGR16</span></code>
were added.</li>
<li>Added user controls <code class="docutils literal"><span class="pre">V4L2_CID_CHROMA_AGC</span></code> and
<code class="docutils literal"><span class="pre">V4L2_CID_COLOR_KILLER</span></code>.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-27">
<h2>6.2.31. V4L2 in Linux 2.6.27<a class="headerlink" href="#v4l2-in-linux-2-6-27" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>The <a class="reference internal" href="vidioc-s-hw-freq-seek.html#vidioc-s-hw-freq-seek"><span>ioctl VIDIOC_S_HW_FREQ_SEEK</span></a> ioctl
and the <code class="docutils literal"><span class="pre">V4L2_CAP_HW_FREQ_SEEK</span></code> capability were added.</li>
<li>The pixel formats <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_YVYU</span></code>, <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_PCA501</span></code>,
<code class="docutils literal"><span class="pre">V4L2_PIX_FMT_PCA505</span></code>, <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_PCA508</span></code>,
<code class="docutils literal"><span class="pre">V4L2_PIX_FMT_PCA561</span></code>, <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_SGBRG8</span></code>,
<code class="docutils literal"><span class="pre">V4L2_PIX_FMT_PAC207</span></code> and <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_PJPG</span></code> were added.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-28">
<h2>6.2.32. V4L2 in Linux 2.6.28<a class="headerlink" href="#v4l2-in-linux-2-6-28" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Added <code class="docutils literal"><span class="pre">V4L2_MPEG_AUDIO_ENCODING_AAC</span></code> and
<code class="docutils literal"><span class="pre">V4L2_MPEG_AUDIO_ENCODING_AC3</span></code> MPEG audio encodings.</li>
<li>Added <code class="docutils literal"><span class="pre">V4L2_MPEG_VIDEO_ENCODING_MPEG_4_AVC</span></code> MPEG video encoding.</li>
<li>The pixel formats <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_SGRBG10</span></code> and
<code class="docutils literal"><span class="pre">V4L2_PIX_FMT_SGRBG10DPCM8</span></code> were added.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-29">
<h2>6.2.33. V4L2 in Linux 2.6.29<a class="headerlink" href="#v4l2-in-linux-2-6-29" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>The <code class="docutils literal"><span class="pre">VIDIOC_G_CHIP_IDENT</span></code> ioctl was renamed to
<code class="docutils literal"><span class="pre">VIDIOC_G_CHIP_IDENT_OLD</span></code> and <code class="docutils literal"><span class="pre">VIDIOC_DBG_G_CHIP_IDENT</span></code> was
introduced in its place. The old struct
struct <code class="docutils literal"><span class="pre">v4l2_chip_ident</span></code> was renamed to
struct <code class="docutils literal"><span class="pre">v4l2_chip_ident_old</span></code>.</li>
<li>The pixel formats <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_VYUY</span></code>, <code class="docutils literal"><span class="pre">V4L2_PIX_FMT_NV16</span></code> and
<code class="docutils literal"><span class="pre">V4L2_PIX_FMT_NV61</span></code> were added.</li>
<li>Added camera controls <code class="docutils literal"><span class="pre">V4L2_CID_ZOOM_ABSOLUTE</span></code>,
<code class="docutils literal"><span class="pre">V4L2_CID_ZOOM_RELATIVE</span></code>, <code class="docutils literal"><span class="pre">V4L2_CID_ZOOM_CONTINUOUS</span></code> and
<code class="docutils literal"><span class="pre">V4L2_CID_PRIVACY</span></code>.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-30">
<h2>6.2.34. V4L2 in Linux 2.6.30<a class="headerlink" href="#v4l2-in-linux-2-6-30" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>New control flag <code class="docutils literal"><span class="pre">V4L2_CTRL_FLAG_WRITE_ONLY</span></code> was added.</li>
<li>New control <code class="docutils literal"><span class="pre">V4L2_CID_COLORFX</span></code> was added.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-32">
<h2>6.2.35. V4L2 in Linux 2.6.32<a class="headerlink" href="#v4l2-in-linux-2-6-32" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>In order to be easier to compare a V4L2 API and a kernel version, now
V4L2 API is numbered using the Linux Kernel version numeration.</li>
<li>Finalized the RDS capture API. See <a class="reference internal" href="dev-rds.html#rds"><span>RDS Interface</span></a> for more information.</li>
<li>Added new capabilities for modulators and RDS encoders.</li>
<li>Add description for libv4l API.</li>
<li>Added support for string controls via new type
<code class="docutils literal"><span class="pre">V4L2_CTRL_TYPE_STRING</span></code>.</li>
<li>Added <code class="docutils literal"><span class="pre">V4L2_CID_BAND_STOP_FILTER</span></code> documentation.</li>
<li>Added FM Modulator (FM TX) Extended Control Class:
<code class="docutils literal"><span class="pre">V4L2_CTRL_CLASS_FM_TX</span></code> and their Control IDs.</li>
<li>Added FM Receiver (FM RX) Extended Control Class:
<code class="docutils literal"><span class="pre">V4L2_CTRL_CLASS_FM_RX</span></code> and their Control IDs.</li>
<li>Added Remote Controller chapter, describing the default Remote
Controller mapping for media devices.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-33">
<h2>6.2.36. V4L2 in Linux 2.6.33<a class="headerlink" href="#v4l2-in-linux-2-6-33" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Added support for Digital Video timings in order to support HDTV
receivers and transmitters.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-34">
<h2>6.2.37. V4L2 in Linux 2.6.34<a class="headerlink" href="#v4l2-in-linux-2-6-34" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Added <code class="docutils literal"><span class="pre">V4L2_CID_IRIS_ABSOLUTE</span></code> and <code class="docutils literal"><span class="pre">V4L2_CID_IRIS_RELATIVE</span></code>
controls to the <a class="reference internal" href="extended-controls.html#camera-controls"><span>Camera controls class</span></a>.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-37">
<h2>6.2.38. V4L2 in Linux 2.6.37<a class="headerlink" href="#v4l2-in-linux-2-6-37" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Remove the vtx (videotext/teletext) API. This API was no longer used
and no hardware exists to verify the API. Nor were any userspace
applications found that used it. It was originally scheduled for
removal in 2.6.35.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-2-6-39">
<h2>6.2.39. V4L2 in Linux 2.6.39<a class="headerlink" href="#v4l2-in-linux-2-6-39" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>The old VIDIOC_*_OLD symbols and V4L1 support were removed.</li>
<li>Multi-planar API added. Does not affect the compatibility of current
drivers and applications. See <a class="reference internal" href="planar-apis.html#planar-apis"><span>multi-planar API</span></a>
for details.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-3-1">
<h2>6.2.40. V4L2 in Linux 3.1<a class="headerlink" href="#v4l2-in-linux-3-1" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">VIDIOC_QUERYCAP now returns a per-subsystem version instead of a
per-driver one.</p>
<p>Standardize an error code for invalid ioctl.</p>
<p>Added V4L2_CTRL_TYPE_BITMASK.</p>
</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-3-2">
<h2>6.2.41. V4L2 in Linux 3.2<a class="headerlink" href="#v4l2-in-linux-3-2" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>V4L2_CTRL_FLAG_VOLATILE was added to signal volatile controls to
userspace.</li>
<li>Add selection API for extended control over cropping and composing.
Does not affect the compatibility of current drivers and
applications. See <a class="reference internal" href="selection-api.html#selection-api"><span>selection API</span></a> for details.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-3-3">
<h2>6.2.42. V4L2 in Linux 3.3<a class="headerlink" href="#v4l2-in-linux-3-3" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Added <code class="docutils literal"><span class="pre">V4L2_CID_ALPHA_COMPONENT</span></code> control to the
<a class="reference internal" href="control.html#control"><span>User controls class</span></a>.</li>
<li>Added the device_caps field to struct v4l2_capabilities and added
the new V4L2_CAP_DEVICE_CAPS capability.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-3-4">
<h2>6.2.43. V4L2 in Linux 3.4<a class="headerlink" href="#v4l2-in-linux-3-4" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Added <a class="reference internal" href="extended-controls.html#jpeg-controls"><span>JPEG compression control class</span></a>.</li>
<li>Extended the DV Timings API:
<a class="reference internal" href="vidioc-enum-dv-timings.html#vidioc-enum-dv-timings"><span>ioctl VIDIOC_ENUM_DV_TIMINGS, VIDIOC_SUBDEV_ENUM_DV_TIMINGS</span></a>,
<a class="reference internal" href="vidioc-query-dv-timings.html#vidioc-query-dv-timings"><span>ioctl VIDIOC_QUERY_DV_TIMINGS</span></a> and
<a class="reference internal" href="vidioc-dv-timings-cap.html#vidioc-dv-timings-cap"><span>ioctl VIDIOC_DV_TIMINGS_CAP, VIDIOC_SUBDEV_DV_TIMINGS_CAP</span></a>.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-3-5">
<h2>6.2.44. V4L2 in Linux 3.5<a class="headerlink" href="#v4l2-in-linux-3-5" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Added integer menus, the new type will be
V4L2_CTRL_TYPE_INTEGER_MENU.</li>
<li>Added selection API for V4L2 subdev interface:
<a class="reference internal" href="vidioc-subdev-g-selection.html#vidioc-subdev-g-selection"><span>ioctl VIDIOC_SUBDEV_G_SELECTION, VIDIOC_SUBDEV_S_SELECTION</span></a> and
<a class="reference internal" href="vidioc-subdev-g-selection.html#vidioc-subdev-g-selection"><span>VIDIOC_SUBDEV_S_SELECTION</span></a>.</li>
<li>Added <code class="docutils literal"><span class="pre">V4L2_COLORFX_ANTIQUE</span></code>, <code class="docutils literal"><span class="pre">V4L2_COLORFX_ART_FREEZE</span></code>,
<code class="docutils literal"><span class="pre">V4L2_COLORFX_AQUA</span></code>, <code class="docutils literal"><span class="pre">V4L2_COLORFX_SILHOUETTE</span></code>,
<code class="docutils literal"><span class="pre">V4L2_COLORFX_SOLARIZATION</span></code>, <code class="docutils literal"><span class="pre">V4L2_COLORFX_VIVID</span></code> and
<code class="docutils literal"><span class="pre">V4L2_COLORFX_ARBITRARY_CBCR</span></code> menu items to the
<code class="docutils literal"><span class="pre">V4L2_CID_COLORFX</span></code> control.</li>
<li>Added <code class="docutils literal"><span class="pre">V4L2_CID_COLORFX_CBCR</span></code> control.</li>
<li>Added camera controls <code class="docutils literal"><span class="pre">V4L2_CID_AUTO_EXPOSURE_BIAS</span></code>,
<code class="docutils literal"><span class="pre">V4L2_CID_AUTO_N_PRESET_WHITE_BALANCE</span></code>,
<code class="docutils literal"><span class="pre">V4L2_CID_IMAGE_STABILIZATION</span></code>, <code class="docutils literal"><span class="pre">V4L2_CID_ISO_SENSITIVITY</span></code>,
<code class="docutils literal"><span class="pre">V4L2_CID_ISO_SENSITIVITY_AUTO</span></code>, <code class="docutils literal"><span class="pre">V4L2_CID_EXPOSURE_METERING</span></code>,
<code class="docutils literal"><span class="pre">V4L2_CID_SCENE_MODE</span></code>, <code class="docutils literal"><span class="pre">V4L2_CID_3A_LOCK</span></code>,
<code class="docutils literal"><span class="pre">V4L2_CID_AUTO_FOCUS_START</span></code>, <code class="docutils literal"><span class="pre">V4L2_CID_AUTO_FOCUS_STOP</span></code>,
<code class="docutils literal"><span class="pre">V4L2_CID_AUTO_FOCUS_STATUS</span></code> and <code class="docutils literal"><span class="pre">V4L2_CID_AUTO_FOCUS_RANGE</span></code>.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-3-6">
<h2>6.2.45. V4L2 in Linux 3.6<a class="headerlink" href="#v4l2-in-linux-3-6" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Replaced <code class="docutils literal"><span class="pre">input</span></code> in struct <a class="reference internal" href="buffer.html#c.v4l2_buffer" title="v4l2_buffer"><code class="xref c c-type docutils literal"><span class="pre">v4l2_buffer</span></code></a> by
<code class="docutils literal"><span class="pre">reserved2</span></code> and removed <code class="docutils literal"><span class="pre">V4L2_BUF_FLAG_INPUT</span></code>.</li>
<li>Added V4L2_CAP_VIDEO_M2M and V4L2_CAP_VIDEO_M2M_MPLANE
capabilities.</li>
<li>Added support for frequency band enumerations:
<a class="reference internal" href="vidioc-enum-freq-bands.html#vidioc-enum-freq-bands"><span>ioctl VIDIOC_ENUM_FREQ_BANDS</span></a>.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-3-9">
<h2>6.2.46. V4L2 in Linux 3.9<a class="headerlink" href="#v4l2-in-linux-3-9" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Added timestamp types to <code class="docutils literal"><span class="pre">flags</span></code> field in
struct <a class="reference internal" href="buffer.html#c.v4l2_buffer" title="v4l2_buffer"><code class="xref c c-type docutils literal"><span class="pre">v4l2_buffer</span></code></a>. See <a class="reference internal" href="buffer.html#buffer-flags"><span>Buffer Flags</span></a>.</li>
<li>Added <code class="docutils literal"><span class="pre">V4L2_EVENT_CTRL_CH_RANGE</span></code> control event changes flag. See
<a class="reference internal" href="vidioc-dqevent.html#ctrl-changes-flags"><span>Control Changes</span></a>.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-3-10">
<h2>6.2.47. V4L2 in Linux 3.10<a class="headerlink" href="#v4l2-in-linux-3-10" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Removed obsolete and unused DV_PRESET ioctls VIDIOC_G_DV_PRESET,
VIDIOC_S_DV_PRESET, VIDIOC_QUERY_DV_PRESET and
VIDIOC_ENUM_DV_PRESET. Remove the related v4l2_input/output
capability flags V4L2_IN_CAP_PRESETS and V4L2_OUT_CAP_PRESETS.</li>
<li>Added new debugging ioctl
<a class="reference internal" href="vidioc-dbg-g-chip-info.html#vidioc-dbg-g-chip-info"><span>ioctl VIDIOC_DBG_G_CHIP_INFO</span></a>.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-3-11">
<h2>6.2.48. V4L2 in Linux 3.11<a class="headerlink" href="#v4l2-in-linux-3-11" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Remove obsolete <code class="docutils literal"><span class="pre">VIDIOC_DBG_G_CHIP_IDENT</span></code> ioctl.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-3-14">
<h2>6.2.49. V4L2 in Linux 3.14<a class="headerlink" href="#v4l2-in-linux-3-14" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>In struct <a class="reference internal" href="dev-overlay.html#c.v4l2_rect" title="v4l2_rect"><code class="xref c c-type docutils literal"><span class="pre">v4l2_rect</span></code></a>, the type of <code class="docutils literal"><span class="pre">width</span></code> and
<code class="docutils literal"><span class="pre">height</span></code> fields changed from _s32 to _u32.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-3-15">
<h2>6.2.50. V4L2 in Linux 3.15<a class="headerlink" href="#v4l2-in-linux-3-15" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Added Software Defined Radio (SDR) Interface.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-3-16">
<h2>6.2.51. V4L2 in Linux 3.16<a class="headerlink" href="#v4l2-in-linux-3-16" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Added event V4L2_EVENT_SOURCE_CHANGE.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-3-17">
<h2>6.2.52. V4L2 in Linux 3.17<a class="headerlink" href="#v4l2-in-linux-3-17" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Extended struct <a class="reference internal" href="pixfmt-v4l2.html#c.v4l2_pix_format" title="v4l2_pix_format"><code class="xref c c-type docutils literal"><span class="pre">v4l2_pix_format</span></code></a>. Added
format flags.</li>
<li>Added compound control types and
<a class="reference internal" href="vidioc-queryctrl.html#vidioc-queryctrl"><span>VIDIOC_QUERY_EXT_CTRL</span></a>.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-3-18">
<h2>6.2.53. V4L2 in Linux 3.18<a class="headerlink" href="#v4l2-in-linux-3-18" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Added <code class="docutils literal"><span class="pre">V4L2_CID_PAN_SPEED</span></code> and <code class="docutils literal"><span class="pre">V4L2_CID_TILT_SPEED</span></code> camera
controls.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-3-19">
<h2>6.2.54. V4L2 in Linux 3.19<a class="headerlink" href="#v4l2-in-linux-3-19" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Rewrote Colorspace chapter, added new enum
<a class="reference internal" href="colorspaces-defs.html#c.v4l2_ycbcr_encoding" title="v4l2_ycbcr_encoding"><code class="xref c c-type docutils literal"><span class="pre">v4l2_ycbcr_encoding</span></code></a> and enum
<a class="reference internal" href="colorspaces-defs.html#c.v4l2_quantization" title="v4l2_quantization"><code class="xref c c-type docutils literal"><span class="pre">v4l2_quantization</span></code></a> fields to struct
<a class="reference internal" href="pixfmt-v4l2.html#c.v4l2_pix_format" title="v4l2_pix_format"><code class="xref c c-type docutils literal"><span class="pre">v4l2_pix_format</span></code></a>, struct
<a class="reference internal" href="pixfmt-v4l2-mplane.html#c.v4l2_pix_format_mplane" title="v4l2_pix_format_mplane"><code class="xref c c-type docutils literal"><span class="pre">v4l2_pix_format_mplane</span></code></a> and
struct <a class="reference internal" href="subdev-formats.html#c.v4l2_mbus_framefmt" title="v4l2_mbus_framefmt"><code class="xref c c-type docutils literal"><span class="pre">v4l2_mbus_framefmt</span></code></a>.</li>
</ol>
</div>
<div class="section" id="v4l2-in-linux-4-4">
<h2>6.2.55. V4L2 in Linux 4.4<a class="headerlink" href="#v4l2-in-linux-4-4" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Renamed <code class="docutils literal"><span class="pre">V4L2_TUNER_ADC</span></code> to <code class="docutils literal"><span class="pre">V4L2_TUNER_SDR</span></code>. The use of
<code class="docutils literal"><span class="pre">V4L2_TUNER_ADC</span></code> is deprecated now.</li>
<li>Added <code class="docutils literal"><span class="pre">V4L2_CID_RF_TUNER_RF_GAIN</span></code> RF Tuner control.</li>
<li>Added transmitter support for Software Defined Radio (SDR) Interface.</li>
</ol>
</div>
<div class="section" id="relation-of-v4l2-to-other-linux-multimedia-apis">
<span id="other"></span><h2>6.2.56. Relation of V4L2 to other Linux multimedia APIs<a class="headerlink" href="#relation-of-v4l2-to-other-linux-multimedia-apis" title="Permalink to this headline">¶</a></h2>
<div class="section" id="x-video-extension">
<span id="xvideo"></span><h3>6.2.56.1. X Video Extension<a class="headerlink" href="#x-video-extension" title="Permalink to this headline">¶</a></h3>
<p>The X Video Extension (abbreviated XVideo or just Xv) is an extension of
the X Window system, implemented for example by the XFree86 project. Its
scope is similar to V4L2, an API to video capture and output devices for
X clients. Xv allows applications to display live video in a window,
send window contents to a TV output, and capture or output still images
in XPixmaps <a class="footnote-reference" href="#f1" id="id1">[1]</a>. With their implementation XFree86 makes the extension
available across many operating systems and architectures.</p>
<p>Because the driver is embedded into the X server Xv has a number of
advantages over the V4L2 <a class="reference internal" href="dev-overlay.html#overlay"><span>video overlay interface</span></a>. The
driver can easily determine the overlay target, i. e. visible graphics
memory or off-screen buffers for a destructive overlay. It can program
the RAMDAC for a non-destructive overlay, scaling or color-keying, or
the clipping functions of the video capture hardware, always in sync
with drawing operations or windows moving or changing their stacking
order.</p>
<p>To combine the advantages of Xv and V4L a special Xv driver exists in
XFree86 and XOrg, just programming any overlay capable Video4Linux
device it finds. To enable it <code class="docutils literal"><span class="pre">/etc/X11/XF86Config</span></code> must contain these
lines:</p>
<div class="highlight-none"><div class="highlight"><pre>Section &quot;Module&quot;
    Load &quot;v4l&quot;
EndSection
</pre></div>
</div>
<p>As of XFree86 4.2 this driver still supports only V4L ioctls, however it
should work just fine with all V4L2 devices through the V4L2
backward-compatibility layer. Since V4L2 permits multiple opens it is
possible (if supported by the V4L2 driver) to capture video while an X
client requested video overlay. Restrictions of simultaneous capturing
and overlay are discussed in <a class="reference internal" href="dev-overlay.html#overlay"><span>Video Overlay Interface</span></a> apply.</p>
<p>Only marginally related to V4L2, XFree86 extended Xv to support hardware
YUV to RGB conversion and scaling for faster video playback, and added
an interface to MPEG-2 decoding hardware. This API is useful to display
images captured with V4L2 devices.</p>
</div>
<div class="section" id="digital-video">
<h3>6.2.56.2. Digital Video<a class="headerlink" href="#digital-video" title="Permalink to this headline">¶</a></h3>
<p>V4L2 does not support digital terrestrial, cable or satellite broadcast.
A separate project aiming at digital receivers exists. You can find its
homepage at <a class="reference external" href="https://linuxtv.org">https://linuxtv.org</a>. The Linux
DVB API has no connection to the V4L2 API except that drivers for hybrid
hardware may support both.</p>
</div>
<div class="section" id="audio-interfaces">
<h3>6.2.56.3. Audio Interfaces<a class="headerlink" href="#audio-interfaces" title="Permalink to this headline">¶</a></h3>
<p>[to do - OSS/ALSA]</p>
</div>
</div>
<div class="section" id="experimental-api-elements">
<span id="experimental"></span><h2>6.2.57. Experimental API Elements<a class="headerlink" href="#experimental-api-elements" title="Permalink to this headline">¶</a></h2>
<p>The following V4L2 API elements are currently experimental and may
change in the future.</p>
<ul class="simple">
<li><a class="reference internal" href="vidioc-dbg-g-register.html#vidioc-dbg-g-register"><span>ioctl VIDIOC_DBG_G_REGISTER, VIDIOC_DBG_S_REGISTER</span></a> and
<a class="reference internal" href="vidioc-dbg-g-register.html#vidioc-dbg-g-register"><span>VIDIOC_DBG_S_REGISTER</span></a> ioctls.</li>
<li><a class="reference internal" href="vidioc-dbg-g-chip-info.html#vidioc-dbg-g-chip-info"><span>ioctl VIDIOC_DBG_G_CHIP_INFO</span></a> ioctl.</li>
</ul>
</div>
<div class="section" id="obsolete-api-elements">
<span id="obsolete"></span><h2>6.2.58. Obsolete API Elements<a class="headerlink" href="#obsolete-api-elements" title="Permalink to this headline">¶</a></h2>
<p>The following V4L2 API elements were superseded by new interfaces and
should not be implemented in new drivers.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">VIDIOC_G_MPEGCOMP</span></code> and <code class="docutils literal"><span class="pre">VIDIOC_S_MPEGCOMP</span></code> ioctls. Use Extended
Controls, <a class="reference internal" href="extended-controls.html#extended-controls"><span>Extended Controls</span></a>.</li>
<li>VIDIOC_G_DV_PRESET, VIDIOC_S_DV_PRESET,
VIDIOC_ENUM_DV_PRESETS and VIDIOC_QUERY_DV_PRESET ioctls. Use
the DV Timings API (<a class="reference internal" href="dv-timings.html#dv-timings"><span>Digital Video (DV) Timings</span></a>).</li>
<li><code class="docutils literal"><span class="pre">VIDIOC_SUBDEV_G_CROP</span></code> and <code class="docutils literal"><span class="pre">VIDIOC_SUBDEV_S_CROP</span></code> ioctls. Use
<code class="docutils literal"><span class="pre">VIDIOC_SUBDEV_G_SELECTION</span></code> and <code class="docutils literal"><span class="pre">VIDIOC_SUBDEV_S_SELECTION</span></code>,
<a class="reference internal" href="vidioc-subdev-g-selection.html#vidioc-subdev-g-selection"><span>ioctl VIDIOC_SUBDEV_G_SELECTION, VIDIOC_SUBDEV_S_SELECTION</span></a>.</li>
</ul>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>This is not implemented in XFree86.</td></tr>
</tbody>
</table>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="user-func.html" class="btn btn-neutral float-right" title="7. Function Reference" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="diff-v4l.html" class="btn btn-neutral" title="6.1. Differences between V4L and V4L2" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>